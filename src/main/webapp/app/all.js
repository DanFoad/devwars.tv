var app=angular.module("app",["app.coming","app.AuthService","app.header","app.home","app.signup","app.gameControlPanel","app.GameService","app.BlogService","app.InfoService","app.UserService","app.WarriorService","app.ContactService","app.games","app.gameSignupConfirm","app.editPlayerDialog","app.addPlayerDialog","app.addSelectedPlayerDialog","app.addBlogPostDialog","app.InputDialog","app.devwarsToast","app.toastService","app.BadgeService","app.blog","app.user","pickadate","app.contact","app.about","app.dashboard","app.badges","app.warriorReg","app.DialogService","app.settings","app.help","app.liveGame","app.verify","app.enterDirective","app.subscribeDirective","app.shop","app.OAuthDirective","app.sidebar","app.editAvatarImage","app.fileread","app.rank","app.profile","app.dashnav","app.confirmDialog","app.leaderboards","app.modCP","LivePoll-Client","LivePoll-Display","Progress","Tooltip","ngCookies","ngMaterial","vcRecaptcha","textAngular","n3-pie-chart","ngImgCrop"]);app.config(["$urlRouterProvider","$httpProvider","$locationProvider",function(e,t,o){e.otherwise("/"),t.defaults.transformResponse=function(e){try{return JSON.parse(e)}catch(t){return e}},t.defaults.transformRequest=function(e){var t=[];for(var o in e)t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",o.html5Mode(!0)}]),app.filter("reverse",function(){return function(e){return e.reverse()}}),app.filter("players",function(){return _.memoize(function(e){var t=["html","css","js"];return e.sort(function(e){return t.indexOf(e.language.toLowerCase())}),e})}),angular.module("app.enterDirective",[]).directive("ngEnter",function(){return function(e,t,o){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(o.ngEnter)}),t.preventDefault())})}}),angular.module("app.fileread",[]).directive("fileread",function(){return{restrict:"A",scope:{fileread:"="},link:function(e,t){t.bind("change",function(t){var o=new FileReader;o.onload=function(t){e.$apply(function(e){e.fileread=t.target.result})},o.readAsDataURL(t.target.files[0])})}}}),angular.module("app.OAuthDirective",[]).directive("oauth",function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,t,o){t.bind("click",function(){o.provider&&(location.href="/v1/oauth/"+o.provider)})}]}}),angular.module("app.subscribeDirective",[]).directive("subscribe",function(){return{restrict:"A",controller:["AuthService","$element",function(e,t){t.bind("click",function(){var t="//devwars.us10.list-manage.com/subscribe/post?u=0719cdf11a95678dd04e5db33&id=02e4f24ca1";e.user&&e.user.email&&(t+="&EMAIL="+e.user.email),window.open(t,"_blank")})}]}}),angular.module("app.AuthService",[]).factory("AuthService",["$http",function(e){var t={};return t.callbacks=[],t.init=function(){e({method:"GET",url:"/v1/user/"}).then(function(e){console.log(e),t.setUser(e.data);for(var o=0;o<t.callbacks.length;o++)t.callbacks[o](e.data)},function(e){})},t.login=function(t,o,a){return e({method:"GET",url:"/v1/user/login",params:t}).then(function(e){location.href="/dashboard"},function(e){console.log(e),a(e)})},t.signup=function(t,o,a){return e({method:"POST",url:"/v1/user/create",params:t}).then(function(e){o(e)},function(e){a(e)})},t.logout=function(){return e({method:"GET",url:"/v1/user/logout"}).then(function(e){location.href="/"},function(e){console.log(e)})},t.setUser=function(e){t.user=e},t.isAdmin=function(){return t.user?"ADMIN"===t.user.role:!1},t.hasProvider=function(e){if(!t.user||!t.user.connectedAccounts)return!1;for(var o in t.user.connectedAccounts){var a=t.user.connectedAccounts[o];if(a.provider.toUpperCase()===e.toUpperCase()&&0==a.disconnected)return!0}return!1},t.hasConnectedToProvider=function(e){if(!t.user||!t.user.connectedAccounts)return!1;for(var o in t.user.connectedAccounts){var a=t.user.connectedAccounts[o];if(a.provider.toUpperCase()===e.toUpperCase())return!0}return!1},t}]),angular.module("app.BadgeService",[]).factory("BadgeService",["$http",function(e){var t={};return t.getAll=function(t,o){e({method:"GET",url:"/v1/badge/all",params:{}}).then(function(e){t(e)},function(e){o(e)})},t}]),angular.module("app.BlogService",[]).factory("BlogService",["$http",function(e){var t={};return t.deleteBlog=function(t,o,a){e({method:"GET",url:"/v1/blog/"+t+"/delete",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.getBlog=function(t,o,a){e({method:"GET",url:"/v1/blog/"+t,params:{}}).then(function(e){o(e)},function(e){a(e)})},t.updateBlog=function(t,o,a,n,r,i,l){e({method:"GET",url:"/v1/blog/"+t+"/update",params:{image_url:o,description:a,text:n,title:r}}).then(function(e){i(e)},function(e){l(e)})},t.allPosts=function(t,o){e({method:"GET",url:"/v1/blog/all",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.createBlog=function(t,o,a,n,r,i){e({method:"GET",url:"/v1/blog/create",params:{image_url:t,description:o,text:a,title:n}}).then(function(e){r(e)},function(e){i(e)})},t}]),angular.module("app.ContactService",[]).factory("ContactService",["$http",function(e){var t={};return t.create=function(t,o,a,n,r,i){e({method:"GET",url:"/v1/contact/create",params:{name:t,text:o,type:a,email:n}}).then(function(e){r(e)},function(e){i(e)})},t}]),angular.module("app.DialogService",[]).factory("DialogService",["GameService","ToastService","$mdDialog","AuthService","$filter","$state",function(e,t,o,a,n,r){var i={};return i.applyForNearestGame=function(o){e.nearestGame(function(e){i.applyForGame(e.data,o)},function(e){t.showDevwarsErrorToast("fa fa-exclamation-circle","Error","No upcoming games")})},i.applyForCurrentGame=function(o){e.currentGame(function(e){i.applyForGame(e.data,o)},function(e){t.showDevwarsErrorToast("fa fa-exclamation-circle","Error","No upcoming games")})},i.applyForGame=function(l,s,c,u){a.user&&a.user.warrior?o.show({controller:"GameSignupConfirmDialogController",templateUrl:"app/components/dialogs/confirmGameSignupDialog/confirmGameSignupDialogView.html",targetEvent:s,locals:{game:l}}).then(function(o){e.signupForGame(o.game.id,function(e){a.init(),t.showDevwarsToast("fa-calendar","Game applied for",n("date")(l.timestamp,"medium"))},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},null):a.user?(r.go("warriorReg"),t.showDevwarsErrorToast("fa-exclamation-circle","Error","Please signup to be a warrior")):i.login(s)},i.login=function(e){o.show({templateUrl:"/app/components/dialogs/loginDialog/loginDialogView.html",controller:"LoginDialogController",targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0}).then(function(e){},function(t){t&&t.register&&i.signup(e)})},i.signup=function(e){o.show({templateUrl:"/app/components/dialogs/signupDialog/signupDialogView.html",controller:"SignupDialogController",targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0}).then(function(e){},function(t){t&&t.login&&i.login(e)})},i.getInputWithMessage=function(e,t,a,n){o.show({templateUrl:"app/components/dialogs/inputDialog/inputDialogView.html",controller:"InputDialogController",targetEvent:a,locals:{title:e,message:t}}).then(function(e){n(e)},function(e){})},i.showConfirmDialog=function(e,t,a,n,r){return o.show({templateUrl:"app/components/dialogs/confirmDialog/confirmDialogView.html",controller:"ConfirmDialogController",targetEvent:r,locals:{title:e,message:t,yes:a,no:n}})},i}]),angular.module("app.GameService",[]).factory("GameService",["$http",function(e){var t={};return t.resetVeteranGames=function(t,o){e({method:"GET",url:"/v1/game/resetVeteranGames",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.editPlayer=function(t,o,a,n,r,i){e({method:"GET",url:"/v1/game/"+o+"/team/"+t+"/player/"+a+"/edit",params:{json:n}}).then(function(e){r(e)},function(e){i(e)})},t.pastGames=function(t,o){e({method:"GET",url:"/v1/game/pastgames",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.addPlayer=function(t,o,a,n,r,i){e({method:"POST",url:"/v1/game/"+o+"/team/"+t+"/add",data:{language:a,user:n}}).then(function(e){r(e)},function(e){i(e)})},t.upcomingGames=function(t,o){e({method:"GET",url:"/v1/game/upcoming",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.allGames=function(t,o,a,n){e({method:"GET",url:"/v1/game/",params:{offset:t,count:o}}).then(function(e){a(e)},function(e){n(e)})},t.latestGame=function(t,o){e({method:"GET",url:"/v1/game/latestgame",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.endGame=function(t,o,a,n){e({method:"GET",url:"/v1/game/"+t+"/endgame",params:{winner:o}}).then(function(e){a(e)},function(e){n(e)})},t.removePlayer=function(t,o,a,n){e({method:"GET",url:"/v1/game/"+t+"/player/"+o+"/remove",params:{}}).then(function(e){a(e)},function(e){n(e)})},t.currentGame=function(t,o){e({method:"GET",url:"/v1/game/currentgame",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.editGame=function(t,o,a,n){e({method:"POST",url:"/v1/game/"+t+"/update",data:{json:o}}).then(function(e){a(e)},function(e){n(e)})},t.pendingPlayers=function(t,o,a){e({method:"GET",url:"/v1/game/"+t+"/pendingplayers",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.forfeitUser=function(t,o,a){e({method:"POST",url:"/v1/game/forfeituser",data:{player:t}}).then(function(e){o(e)},function(e){a(e)})},t.createGame=function(t,o,a,n){e({method:"GET",url:"/v1/game/create",params:{name:t,time:o}}).then(function(e){a(e)},function(e){n(e)})},t.activateGame=function(t,o,a){e({method:"GET",url:"/v1/game/"+t+"/activate",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.signupForGame=function(t,o,a){e({method:"GET",url:"/v1/game/"+t+"/signup",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.addVotes=function(t,o,a,n,r,i,l){e({method:"GET",url:"/v1/game/"+o+"/team/"+t+"/addvotes",params:{code:a,func:n,design:r}}).then(function(e){i(e)},function(e){l(e)})},t.nearestGame=function(t,o){e({method:"GET",url:"/v1/game/nearestgame",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.addPointsToTeam=function(t,o,a,n,r,i){e({method:"GET",url:"/v1/game/"+o+"/team/"+t+"/addpoints",params:{xp:a,points:n}}).then(function(e){r(e)},function(e){i(e)})},t.getGame=function(t,o,a){e({method:"GET",url:"/v1/game/"+t,params:{}}).then(function(e){o(e)},function(e){a(e)})},t.deleteGame=function(t,o,a){e({method:"GET",url:"/v1/game/"+t+"/delete",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.deactivateGame=function(t,o,a){e({method:"GET",url:"/v1/game/"+t+"/deactivate",params:{}}).then(function(e){o(e)},function(e){a(e)})},t}]),angular.module("app.InfoService",[]).factory("InfoService",["$http",function(e){var t={};return t.allInfo=function(t,o){e({method:"GET",url:"/v1/info/",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.xpLeaderboard=function(t,o){e({method:"GET",url:"/v1/info/xpleaderboard",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.bitsLeaderboard=function(t,o){e({method:"GET",url:"/v1/info/bitsleaderboard",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.leaderboard=function(t,o,a){e({method:"GET",url:"/v1/info/leaderboard",params:{page:t}}).then(function(e){o(e)},function(e){a(e)})},t}]),angular.module("app.MailingListService",[]).factory("MailingListService",["$http",function(e){var t={};return t}]),angular.module("app.toastService",[]).factory("ToastService",["$mdToast",function(e){var t={};return t.showDevwarsToast=function(t,o,a,n){return e.show({templateUrl:"/app/components/toasts/devwarsToast/devwarsToastView.html",controller:"DevWarsToastController",locals:{faIcon:t,title:o,message:a},delay:n?n:3e3})},t.showDevwarsErrorToast=function(t,o,a,n){return e.show({templateUrl:"/app/components/toasts/devwarsToast/devwarsErrorToastView.html",controller:"DevWarsToastController",locals:{faIcon:t,title:o,message:a},delay:n?n:3e3})},t}]),angular.module("app.UserService",[]).factory("UserService",["$http",function(e){var t={};return t.user=function(t,o){e({method:"GET",url:"/v1/user/",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.login=function(t,o,a,n){e({method:"GET",url:"/v1/user/login",params:{password:t,username:o}}).then(function(e){a(e)},function(e){n(e)})},t.logout=function(t,o){e({method:"GET",url:"/v1/user/logout",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.createUser=function(t,o,a,n,r,i,l){e({method:"GET",url:"/v1/user/create",params:{captchaResponse:t,password:o,referral:r,email:a,username:n}}).then(function(e){i(e)},function(e){l(e)})},t.getUser=function(t,o,a){e({method:"GET",url:"/v1/user/"+t,params:{}}).then(function(e){o(e)},function(e){a(e)})},t.addPoints=function(t,o,a,n,r){e({method:"GET",url:"/v1/user/"+t+"/addpoints",params:{xp:o,points:a}}).then(function(e){n(e)},function(e){r(e)})},t.validateUser=function(t,o,a){e({method:"GET",url:"/v1/user/validate",params:{uid:t}}).then(function(e){o(e)},function(e){a(e)})},t.changeAvatar=function(t,o,a){e({method:"GET",url:"/v1/user/changeavatar",params:{file:t}}).then(function(e){o(e)},function(e){a(e)})},t.getActivities=function(t,o){e({method:"GET",url:"/v1/user/activity",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.updateInfo=function(t,o,a,n,r,i){e({method:"GET",url:"/v1/user/updateinfo",params:{company:t,location:o,url:a,username:n}}).then(function(e){r(e)},function(e){i(e)})},t.appliedGames=function(t,o){e({method:"GET",url:"/v1/user/appliedgames",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.getPublicUser=function(t,o,a){e({method:"GET",url:"/v1/user/"+t+"/public",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.getUserAvatar=function(t,o,a){e({method:"GET",url:"/v1/user/"+t+"/avatar",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.changeEmail=function(t,o,a,n){e({method:"GET",url:"/v1/user/changeemail",params:{newEmail:t,currentPassword:o}}).then(function(e){a(e)},function(e){n(e)})},t.getAvatar=function(t,o){e({method:"GET",url:"/v1/user/avatar",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.deleteUser=function(t,o,a){e({method:"GET",url:"/v1/user/"+t+"/delete",params:{}}).then(function(e){o(e)},function(e){a(e)})},t.changePassword=function(t,o,a,n){e({method:"GET",url:"/v1/user/changepassword",params:{newPassword:t,currentPassword:o}}).then(function(e){a(e)},function(e){n(e)})},t.claimTwitch=function(t,o){e({method:"GET",url:"/v1/user/claimtwitch",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.getBadges=function(t,o){e({method:"GET",url:"/v1/user/badges",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.testEmail=function(t,o,a,n){e({method:"GET",url:"/v1/user/testemail",params:{uid:t,email:o}}).then(function(e){a(e)},function(e){n(e)})},t.releaseUsername=function(t,o){e({method:"GET",url:"/v1/user/releasetwitch",params:{}}).then(function(e){t(e)},function(e){o(e)})},t.markNotificationsAsRead=function(t,o,a){e({method:"POST",url:"/v1/user/notifications/read",data:{notifications:t}}).then(function(e){o(e)},function(e){a(e)})},t.getUnreadNotifications=function(t,o){e({method:"GET",url:"/v1/user/notifications",params:{}}).then(function(e){t(e)},function(e){o(e)})},t}]),angular.module("app.WarriorService",[]).factory("WarriorService",["$http",function(e){var t={};return t.register=function(t,o,a,n,r,i,l,s,c,u,d,m,p,f,g){e({method:"GET",url:"/v1/warrior/register",params:{cssRate:t,year:o,about:a,htmlRate:n,firstName:r,month:i,jsRate:l,c9Name:s,location:c,company:p,favFood:u,favTool:d,day:m}}).then(function(e){f(e)},function(e){g(e)})},t}]),angular.module("app.header",["ngCookies"]).controller("HeaderController",["$scope","$mdDialog","AuthService","GameService","$filter","DialogService","$state","$cookies","$cookieStore","UserService","ToastService",function(e,t,o,a,n,r,i,l,s,c,u){o.init(),e.AuthService=o,e.$state=i,e.hasInit=!1,e.DialogService=r,e.$cookies=l,a.currentGame(function(t){e.currentGame=t.data,e.currentGameMessage="We're live right now : "+n("date")(e.currentGame.timestamp,"shortTime")+" on "+n("date")(e.currentGame.timestamp,"longDate")},function(t){e.currentGame={},a.nearestGame(function(t){e.nearestGame=t.data,e.nearestGameMessage="Next Game @ "+n("date")(e.nearestGame.timestamp,"shortTime")+" on "+n("date")(e.nearestGame.timestamp,"longDate")},function(t){e.currentGame={}})}),e.logout=function(){o.logout()},c.getUnreadNotifications(function(e){e.data.forEach(function(e,t){setTimeout(function(){u.showDevwarsToast("fa-check-circle","Notification",e.notificationText)},3e3*t)}),c.markNotificationsAsRead(JSON.stringify(e.data),angular.noop,angular.noop)},angular.noop)}]),angular.module("app.footer",[]).controller("footerController",["$scope","$mdDialog","DialogService",function(e,t,o){e.DialogService=o}]);var _twitchUsername="b3zman41",_appServer="http://dragon.umryn.net:22050";!function(e,t){var o=e.module("angularSpectrumColorpicker",[]);!function(t){o.directive("spectrumColorpicker",function(){return{restrict:"E",require:"ngModel",scope:!1,replace:!0,template:'<span><input class="input-small" /></span>',link:function(o,a,n,r){function i(t){var o=s;t?o=t.toString(c):e.isUndefined(s)&&(o=t),r.$setViewValue(o)}var l=a.find("input"),s=o.$eval(n.fallbackValue),c=o.$eval(n.format)||t,u=function(e){o.$apply(function(){i(e)})},d=function(){return l.spectrum("toggle"),!1},m=e.extend({color:r.$viewValue,change:u,move:u,hide:u},o.$eval(n.options));n.triggerId&&e.element(document.body).on("click","#"+n.triggerId,d),r.$render=function(){l.spectrum("set",r.$viewValue||"")},m.color&&(l.spectrum("set",m.color||""),i(m.color)),l.spectrum(m),o.$on("$destroy",function(){l.spectrum("destroy")})}}})}()}(window.angular),function(){angular.module("LivePoll-Client",["Progress","Tooltip","angularSpectrumColorpicker"]).config(["$interpolateProvider",function(e){}])}(),function(){function e(e,t,o,a){t.connected=!1,t.throttled=!1,t.user=null,t.defaultStyle={bgColor:"rgba(0, 0, 0, .75)",barColor:"rgb(231, 163, 17)",barTextColor:"#f1f1f1",barTextShadowColor:"rgba(0, 0, 0, .5)",optionBgColor:"rgb(255, 255, 255)",optionTextColor:"#333333",optionTextShadowColor:"rgba(0, 0, 0, 0)",outerTextColor:"#f1f1f1",outerTextShadowColor:"rgba(0, 0, 0, .5)"},t.getDefaultStyle=function(e){return"undefined"!=typeof t.defaultStyle[e]?t.defaultStyle[e]:void 0},t.resetStyles=function(){for(var e in t.defaultStyle)t.input[e]=t.defaultStyle[e]},t.question="",t.totalVotes=0,t.options=[];var n={bgColor:t.getDefaultStyle("bgColor"),barColor:t.getDefaultStyle("barColor"),barTextColor:t.getDefaultStyle("barTextColor"),barTextShadowColor:t.getDefaultStyle("barTextShadowColor"),optionBgColor:t.getDefaultStyle("optionBgColor"),optionTextColor:t.getDefaultStyle("optionTextColor"),optionTextShadowColor:t.getDefaultStyle("optionTextShadowColor"),outerTextColor:t.getDefaultStyle("outerTextColor"),outerTextShadowColor:t.getDefaultStyle("outerTextShadowColor"),options:[{text:"",keyword:""},{text:"",keyword:""}],question:"",subMult:1,subOnly:"false"},r=angular.copy(n);if(t.input=angular.copy(r),t.updateStatus=function(e,a){o(function(){t.connected=e,t.status=a})},t.testInterval=null,t.testForm=function(){o(function(){a.cancel(t.testInterval),t.question="Is this teh urn? (Fake Poll)",t.totalVotes=100,t.options=[{text:"Teh urn",keyword:"urn",count:50},{text:"Not teh urn",keyword:"noep",count:50}],t.testInterval=a(function(){var e=Math.floor(9*Math.random());e>0?t.options[1].count+=1:t.options[0].count+=1,t.totalVotes+=1},150)})},t.testForm(),t.percentage=function(e){var o=Number(e/t.totalVotes*100).toFixed(2);return isNaN(o)?0:o},t.closePoll=function(){t.throttleButtons(),void 0!==i&&i.emit("close_poll",t.user)},t.resetForm=function(){t.input.options.splice(2,t.input.options.length-2),t.input=angular.copy(r),t.pollForm.$setPristine()},t.addOption=function(){o(function(){var e=t.input.options.length;8>e&&t.input.options.push({text:"",keyword:""})})},t.removeOption=function(){o(function(){var e=t.input.options.length,o=e-1;e>2&&t.input.options.splice(o,1)})},t.submitForm=function(e){if(t.throttleButtons(),e&&"undefined"!=typeof i){var o={options:t.input.options,question:t.input.question,subOnly:t.input.subOnly,style:{},token:_twitchToken};for(var a in t.defaultStyle)if(t.defaultStyle.hasOwnProperty(a)){var n=t.defaultStyle[a];n!==t.input[a]&&(o.style[a]=t.input[a])}i.emit("create_poll",o)}},t.throttleButtons=function(){t.throttled=!0,o(function(){t.throttled=!1},2e3)},t.incSubMult=function(){var e=Number(t.input.subMult);99>e&&(t.input.subMult=e+1)},t.decSubMult=function(){var e=Number(t.input.subMult);e>1&&(t.input.subMult=e-1)},"undefined"==typeof io)return void t.updateStatus(!1,"Failed to load socket connection library... Application may be down. Please try reloading this page.");var i=io(_appServer);i.on("connect",function(){t.updateStatus(!0,"Connected."),i.emit("client_connect",{user:_twitchUsername,token:_twitchToken})}),i.on("disconnect",function(){t.updateStatus(!1,"Disconnected, attempting to reconnect...")}),i.on("user",function(e){return null===e?void t.updateStatus(!1,"Your session data does not match what Twitch is telling me. You should try logging out and logging in again."):void o(function(){t.user=e})}),i.on("poll",function(e){a.cancel(t.testInterval),o(function(){t.question=e.question,t.totalVotes=e.totalVotes,t.options=e.options})}),i.on("poll_closed",function(){t.testForm()}),i.on("vote",function(e){o(function(){t.options[e].count+=1,t.totalVotes+=1})}),i.on("vote_switch",function(e){o(function(){t.options[e.from].count-=1,t.options[e.to].count+=1})})}angular.module("LivePoll-Client").controller("LivePollClientCtrl",e),e.$inject=["$rootScope","$scope","$timeout","$interval"]}(),function(){angular.module("LivePoll-Display",["ngAnimate","Progress"]).config(["$interpolateProvider",function(e){}])}(),function(){function e(e,t,o,a){if(e.closed=!1,e.options=[],e.pollActive=!1,e.question="",e.style={},e.totalVotes=0,e.percentage=function(t){var o=Number(t/e.totalVotes*100).toFixed(2);return isNaN(o)?0:o},e.addColor=function(){},e.textShadow=function(e){return"undefined"!=typeof e?"1px 1px 0 "+e:{}},(t.innerHeight<500||t.innerWidth<500)&&(e.showWindowEnforcer=!0),"undefined"!=typeof io){var n=io(_appServer);n.on("connect",function(){n.emit("client_connect",{user:_twitchUsername})}),n.on("poll",function(t){a(function(){e.style.bgColor=t.style.bgColor,e.style.barColor=t.style.barColor,e.style.barTextColor=t.style.barTextColor,e.style.barTextShadowColor=t.style.barTextShadowColor,e.style.optionBgColor=t.style.optionBgColor,e.style.optionTextColor=t.style.optionTextColor,e.style.optionTextShadowColor=t.style.optionTextShadowColor,e.style.outerTextColor=t.style.outerTextColor,e.style.outerTextShadowColor=t.style.outerTextShadowColor,e.question=t.question,e.totalVotes=t.totalVotes,e.options=t.options,e.pollActive=!0}),console.log("poll received"),console.log(t)}),n.on("poll_closed",function(){console.log("poll closed"),a(function(){e.pollActive=!1})}),n.on("vote",function(t){a(function(){e.options[t].count+=1,e.totalVotes+=1}),console.log("vote received: %s",t)}),n.on("vote_switch",function(t){a(function(){e.options[t.from].count-=1,e.options[t.to].count+=1}),console.log("vote switch received")})}}angular.module("LivePoll-Display").controller("LivePollDisplayCtrl",e),e.$inject=["$scope","$window","$interval","$timeout"]}(),function(){angular.module("Progress",[])}(),function(){function e(){return{link:function(e,t,o){o.$observe("percent",function(e){t.css("width",e+"%")})}}}angular.module("Progress").directive("ngProgress",e)}(),function(){angular.module("Tooltip",[])}(),function(){function e(e){return{link:function(t,o,a){var n=a.ngTooltip,r=angular.element(e[0].body),i=angular.element('<div class="tooltip"></div>');i.html(n),i.css("display","none"),r.append(i),o.hover(function(){var e=o.offset(),t=e.top,a=e.left,n=o.width(),r=o.height();i.css("left",a+n+"px"),i.css("top",t+r/2-25+"px"),i.stop().fadeIn(200)},function(){i.stop().fadeOut(200)})}}}angular.module("Tooltip").directive("ngTooltip",e),e.$inject=["$document"]}(),angular.module("app.user",[]).controller("UserController",["$scope","UserService","ToastService",function(e,t,o){e.user=null,e.updateUser=function(){t.getUser(e.user.id,function(t){e.user=t.data},function(e){console.log(e)})},e.setUserId=function(o){t.getUser(o,function(t){e.user=t.data,console.log(e.user)},angular.noop)},e.setUser=function(t){e.user=t,console.log(e.user)},e.addPoints=function(a){t.addPoints(e.user.id,0,a,function(t){o.showDevwarsToast("fa-check-circle",(a>0?"Added":"Subtracted")+" points",(a>0?"Added":"Subtracted")+" "+a+" points"),e.updateUser()},angular.noop)}}]),angular.module("app.dashnav",[]).directive("dashnav",function(){return{restrict:"E",templateUrl:"/app/directives/dashnavDirective/dashnavView.html",controller:["$scope",function(e){e.goToProfile=function(e){location.href="/profile?username="+e}}]}}),angular.module("app.rank",[]).directive("rank",function(){return{restrict:"A",scope:{rank:"="},controller:["$scope",function(e){}],templateUrl:"/app/directives/rank/rankView.html"}}),angular.module("app.sidebar",[]).directive("sidebar",function(){return{restrict:"E",controller:["$scope","InfoService",function(e,t){e.updateInfo=function(){t.allInfo(function(t){e.info=t.data},function(e){console.log(e)}),t.bitsLeaderboard(function(t){e.bitsLeaderboard=t.data},function(e){console.log(e)}),t.xpLeaderboard(function(t){e.xpLeaderboard=t.data},function(e){console.log(e)})},e.updateInfo()}],templateUrl:"/app/directives/sidebarDirective/sidebarView.html"}}),angular.module("app.about",["ui.router"]).config(["$stateProvider",function(e){e.state("about",{url:"/about",templateUrl:"app/pages/about/aboutView.html",controller:"AboutController"})}]).controller("AboutController",["$scope",function(e){}]),angular.module("app.badges",[]).config(["$stateProvider",function(e){e.state("badges",{url:"/badges",templateUrl:"/app/pages/badges/badgesView.html",controller:"BadgesController"})}]).controller("BadgesController",["$scope","$http","BadgeService","AuthService",function(e,t,o,a){e.imageNameFromName=function(e){return e.toLowerCase().replace(/\s+/g,"-")},e.userHasBadge=function(e){if(a.user)for(var t in a.user.badges){var o=a.user.badges[t];if(e.id===o.id)return!0}return!1},e.badgeForName=function(t){for(var o in e.badges){var a=e.badges[o];if(a.name===t)return a}return null},o.getAll(function(t){e.badges=t.data},angular.noop),e.badgePercentCalculators={Authentic:function(){return"PENDING"==a.user.role?0:100},"Making Links":function(){return Math.min(a.user.connectedAccounts.length>0?100:0,100)},"Full Coverage":function(){return Math.min(a.user.connectedAccounts.length/5*100,100)},"Feed The Pig":function(){return Math.min(a.user.ranking.points/5e3*100,100)},"Penny-Pincher":function(){return Math.min(a.user.ranking.points/25e3*100,100)},"Follow Me":function(){return Math.min(a.user.referredUsers/5*100,100)},Influential:function(){return Math.min(a.user.referredUsers/25*100,100)},"Natural Leader":function(){return Math.min(a.user.referredUsers/50*100,100)},"Ace High":function(){return e.userHasBadge(e.badgeForName("Ace High"))?100:0},"Beginner's Luck":function(){return a.user.gamesWon>0?100:0},Victorious:function(){return Math.min(a.user.gamesWon/5*100,100)},Hotshot:function(){return Math.min(a.user.gamesWon/10*100,100)},Steamroller:function(){return Math.min(a.user.gamesWon/25*100,100)},"Hot Streak":function(){return Math.min(a.user.gameStreak/3*100,100)},"Cake Day":function(){return e.userHasBadge(e.badgeForName("Cake Day"))?100:0}}}]),angular.module("app.auth",["ui.router"]).config(["$stateProvider",function(e){e.state("auth",{url:"/login",templateUrl:"app/pages/auth/loginView.html",controller:"LoginController"})}]).controller("LoginController",function(e,t,o,a){}),angular.module("app.blog",[]).config(["$stateProvider",function(e){e.state("blog",{url:"/blog",templateUrl:"/app/pages/blog/blogView.html",controller:"BlogController"})}]).controller("BlogController",["$scope","BlogService","$mdDialog","ToastService","AuthService","$anchorScroll",function(e,t,o,a,n,r){e.posts=[],e.AuthService=n,e.updatePosts=function(){t.allPosts(function(t){console.log(t.data),e.posts=t.data},function(e){console.log(e)})},e.newPost=function(t){o.show({templateUrl:"/app/components/dialogs/addBlogPostDialog/addBlogPostDialogView.html",controller:"AddBlogPostDialogController",targetEvent:t}).then(function(t){a.showDevwarsToast("fa-check-circle","Successfully published",t.title),e.updatePosts()},function(e){e&&a.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not publish post")})},e.editPost=function(t,n){o.show({templateUrl:"/app/components/dialogs/addBlogPostDialog/addBlogPostDialogView.html",controller:"EditBlogPostDialogController",targetEvent:n,locals:{post:t}}).then(function(t){a.showDevwarsToast("fa-check-circle","Success","Edited post"),e.updatePosts()},angular.noop)},e.deletePost=function(o){t.deleteBlog(o.id,function(t){a.showDevwarsToast("fa-check-circle","Successfully deleted post",t.data.title),e.updatePosts()},function(){a.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not delete post")})},e.updatePosts()}]);var home=angular.module("app.coming",["ui.router"]);home.config(["$stateProvider",function(e){e.state("coming",{url:"/coming",templateUrl:"/app/pages/coming/comingView.html"})}]),angular.module("app.dashboard",[]).config(["$stateProvider",function(e){e.state("dashboard",{name:"dashboard",url:"/dashboard","abstract":!0,templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"}).state("dashboard.home",{url:"",parent:"dashboard",views:{"":{templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"},"dashboardInner@dashboard":{templateUrl:"/app/pages/dashboard/dashboardHome.html",controller:"DashboardController"}}}).state("dashboard.profile",{url:"/profile",parent:"dashboard",views:{"":{templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"},"dashboardInner@dashboard":{templateUrl:"/app/pages/settings/settingsProfileView.html",controller:"SettingsController"}}}).state("dashboard.badges",{url:"/badges",parent:"dashboard",views:{"":{templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"},"dashboardInner@dashboard":{templateUrl:"/app/pages/badges/badgesView.html",controller:"BadgesController"}}})}]).controller("DashboardController",["$scope","AuthService","UserService",function(e,t,o){e.AuthService=t,e.onLoad=function(){o.getActivities(function(e){t.user.activityLog=e.data},angular.noop)},t.user?e.onLoad():t.callbacks.push(e.onLoad),e.imageForRank=function(e){var t={"Bronze I":"bronze1","Bronze II":"bronze2","Bronze III":"bronze3","Bronze IV":"bronze4","Bronze V":"bronze5","Silver I":"silver1","Silver II":"silver2","Silver III":"silver3","Silver IV":"silver4","Silver V":"silver5","Gold I":"gold1","Gold II":"gold2","Gold III":"gold3","Gold IV":"gold4","Gold V":"gold5","Platinum I":"platinum1","Platinum II":"platinum2","Platinum III":"platinum3","Platinum IV":"platinum4","Platinum V":"platinum5","Diamond I":"diamond1","Diamond II":"diamond2","Diamond III":"diamond3","Diamond IV":"diamond4","Diamond V":"diamond5",Elite:"elite"};return t[e]}}]),angular.module("app.contact",[]).config(["$stateProvider",function(e){e.state("contact",{url:"/contact",templateUrl:"/app/pages/contact/contactView.html",controller:"ContactController"})}]).controller("ContactController",["$scope","ToastService","ContactService","AuthService",function(e,t,o,a){e.form={},e.AuthService=a,e.setDefaults=function(){a.user?(e.form.name=a.user.username,e.form.email=a.user.email):a.callbacks.push(e.setDefaults)},e.submit=function(a){a.name&&a.email&&a.type&&a.text?a.text.length>1e3?t.showDevwarsErrorToast("fa-exclamation-circle","Error","Enquiry too long"):o.create(a.name,a.text,a.type,a.email,function(o){t.showDevwarsToast("fa-check-circle","Success","We have received your feedback"),delete e.form},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Something went wrong")}):t.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing fields")},e.setDefaults();

}]),angular.module("app.gameControlPanel",[]).config(["$stateProvider",function(e){e.state("gameControlPanel",{url:"/gpanel",templateUrl:"/app/pages/gameControlPanel/gameControlPanelView.html",controller:"GameControlPanelController"})}]).controller("GameControlPanelController",["$scope","GameService","$location","AuthService","$rootScope","$mdDialog","ToastService","$interval","DialogService",function(e,t,o,a,n,r,i,l,s){var c=o.search();e.game=null,e.pickedDate=new Date,e.pickedTime=new Date,e.updateGame=function(){c.game?t.getGame(c.game,function(t){e.game=t.data,e.pickedDate=new Date(e.game.timestamp),e.pickedTime=new Date(e.game.timestamp),e.updateSignedUpUsers()},function(e){console.log(e)}):t.currentGame(function(t){e.game=t.data,e.pickedDate=new Date(e.game.timestamp),e.pickedTime=new Date(e.game.timestamp),e.updateSignedUpUsers()},function(o){console.log(o),t.nearestGame(function(t){e.game=t.data,e.pickedDate=new Date(e.game.timestamp),e.pickedTime=new Date(e.game.timestamp),e.updateSignedUpUsers()},function(e){console.log(e)})})},e.updateSignedUpUsers=function(){t.pendingPlayers(e.game.id,function(t){console.log(t.data),e.signedUpUsers=t.data},function(e){})},e.saveGame=function(){e.getGameTimestamp();for(var o in e.game.teams){var a=e.game.teams[o];for(var n in a.completedObjectives){var r=a.completedObjectives[n].objective,l=!1;for(var s in e.game.objectives){var c=e.game.objectives[s];c.id&&r.id&&c.id===r.id&&(l=!0)}l||a.completedObjectives.splice(n,1)}}t.editGame(e.game.id,JSON.stringify(e.game),function(t){i.showDevwarsToast("fa-check-circle","Success","Saved Game"),e.updateGame()},function(e){i.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not save game.")})},e.addPlayer=function(t,o){r.show({templateUrl:"/app/components/dialogs/addPlayerDialog/addPlayerDialogView.html",controller:"AddPlayerDialogController",targetEvent:o,locals:{game:t}}).then(function(t){i.showDevwarsToast("fa-check-circle","Successfully added player",t.newPlayer.user.username),e.updateGame()},function(e){i.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player.")})},e.removePlayer=function(o,a,n){t.removePlayer(o.id,a.id,function(t){i.showDevwarsToast("fa-check-circle","Successfully removed player",a.user.username),e.updateGame()},function(e){console.log(e)}),n.stopPropagation()},e.editPlayer=function(t,o,a,n){r.show({templateUrl:"/app/components/dialogs/editPlayerDialog/editPlayerDialogView.html",controller:"EditPlayerDialogController",targetEvent:n,locals:{game:t,player:o,team:a}}).then(function(t){e.updateGame(),i.showDevwarsToast("fa-check-circle","Successfully edited player",t.oldPlayer.user.username)},function(e){})},e.getGameTimestamp=function(){return e.pickedDate&&(e.pickedDate.setHours(0),e.pickedDate.setMinutes(0),e.pickedDate.setSeconds(0),e.pickedDate.setMilliseconds(0),e.game.timestamp=e.pickedDate.getTime(),e.pickedTime&&(e.game.timestamp+=60*(60*e.pickedTime.getHours()+e.pickedTime.getMinutes())*1e3)),e.game.timestamp},e.activateGame=function(){t.activateGame(e.game.id,function(t){e.game=t.data},angular.noop)},e.deactivateGame=function(){t.deactivateGame(e.game.id,function(t){e.game=t.data},angular.noop)},e.addPointsToTeamInGame=function(e,o,a){s.getInputWithMessage("Add points to "+e.name,"Points",a,function(a){t.addPointsToTeam(e.id,o.id,0,a,function(t){i.showDevwarsToast("fa-check-circle","Success","Added "+a+" points to "+e.name)},angular.noop)})},e.addXPToTeamInGame=function(e,o,a){s.getInputWithMessage("Add XP to "+e.name,"XP",a,function(a){t.addPointsToTeam(e.id,o.id,a,0,function(t){i.showDevwarsToast("fa-check-circle","Success","Added "+a+" XP to "+e.name)},angular.noop)})},e.toggleTeamObjective=function(t,o){if(t.completedObjectives||(console.log("Resetting"),t.completedObjectives=[]),e.teamHasObjective(t,o)){for(var a=-1,n=0;n<t.completedObjectives.length;n++)o.id===t.completedObjectives[n].objective.id&&(a=n,n=t.completedObjectives.length);a>-1&&(t.completedObjectives.splice(a,1),console.log("Able to remove"))}else t.completedObjectives.push({team_id:t.id,objective:o}),console.log("Able to add")},e.teamHasObjective=function(e,t){for(var o in e.completedObjectives){var a=e.completedObjectives[o].objective;if(a.id===t.id)return!0}return!1},e.removeObjectiveFromGame=function(e,t){t.objectives&&t.objectives.splice(t.objectives.indexOf(e),1);for(var o in t.teams){var a=t.teams[o];for(var n in a.completedObjectives){var r=a.completedObjectives[n].objective;r.id===e.id&&a.completedObjectives.splice(a.completedObjectives.indexOf(r,1))}}},e.endGame=function(e){t.endGame(e.id,e.teams.red.win?e.teams.red.id:e.teams.blue.id,function(e){i.showDevwarsToast("fa-check-circle","Success","Ended Game")},function(e){i.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not end game")})},n.$on("$locationChangeStart",function(e,t,o){var a=t.split("?")[1],n=o.split("?")[1],r=t.split("?")[0],i=o.split("?")[0];r===i&&a&&!n&&location.reload(),r===i&&n&&!a&&location.reload(),r===i&&a&&n&&a!==n&&location.reload()}),e.updateGame()}]),angular.module("app.games",[]).config(["$stateProvider",function(e){e.state("games",{url:"/games",templateUrl:"/app/pages/games/gamesView.html",controller:"GameController"})}]).controller("GameController",["$scope","GameService","AuthService","$mdDialog","$mdToast","$filter","ToastService","DialogService",function(e,t,o,a,n,r,i,l){e.games=[],e.AuthService=o,e.options={thickness:200,legend:!1},e.labels=["blue","red"],e.DialogService=l,t.pastGames(function(t){e.pastGames=t.data;for(var o in e.pastGames){var a=e.pastGames[o];for(var n in a.teams){var r=a.teams[n],i=r.players,l=[];for(var s in i){var c=i[s];"html"===c.language.toLowerCase()&&(l[0]=c),"css"===c.language.toLowerCase()&&(l[1]=c),"js"===c.language.toLowerCase()&&(l[2]=c)}console.log(l),r.players=l}}$(document).width()>840&&e.setSelectedGame(e.pastGames[0])},angular.noop),t.upcomingGames(function(t){e.upcomingGames=t.data},angular.noop),e.signupForGame=function(e,t){o.user&&"PENDING"!==o.user.role?l.applyForGame(e,t):o.user?i.showDevwarsErrorToast("fa-envelope-o","Error","Please confirm your email before applying for games."):l.signup(t)},e.setSelectedGame=function(t,o){e.selectedGame=t,o>-1&&(new Date).getTime()-e.lastTimeClicked>200&&($(".game"+o).next().hasClass("slide")?($(".game"+o).next().slideToggle(),$(".game"+o).next().removeClass("slide")):($(".slide").slideToggle(),$(".slide").removeClass("slide"),$(".game"+o).next().slideToggle(),$(".game"+o).next().addClass("slide")),e.lastTimeClicked=(new Date).getTime()),e.designData=e.dataForGameCategory(e.selectedGame,"design"),e.funcData=e.dataForGameCategory(e.selectedGame,"func"),e.codeData=e.dataForGameCategory(e.selectedGame,"code")},e.isGameSelected=function(t){return t.id===e.selectedGame.id},e.moderateGame=function(e){window.location="/#/gpanel?game="+e.id},e.dataForGameCategory=function(e,t){var o=[];for(var a in e.teams){var n=e.teams[a];n[t+"Votes"]&&o.push({label:n.name,value:n[t+"Votes"],color:"blue"===n.name?"#03A9F4":"#E91E63"})}return o},e.getVotePointsEarned=function(e,t){var o=null,a=null;"red"===e?(a=t.teams.red,o=t.teams.blue):"blue"===e&&(a=t.teams.blue,o=t.teams.red);var n=0;return a.designVotes>=o.designVotes&&0!==a.designVotes&&0!==o.designVotes&&(n+=2),a.funcVotes>=o.funcVotes&&0!==a.funcVotes&&0!==o.funcVotes&&(n+=2),a.codeVotes>=o.codeVotes&&0!==a.codeVotes&&0!==o.codeVotes&&(n+=2),a.completedObjectives.length===t.objectives.length&&n++,n},e.getOtherTeam=function(e,t){return t.teams["red"===e.name?"blue":"red"]},e.getAllGames=function(o){t.allGames(0,5,function(t){var a=t.data;e.games=e.games.concat(a);for(var n=0;n<e.games.length;n++){var r=e.games[n];o&&r.id===o.data.id&&(e.games.splice(n,1),n=e.games.length)}console.log(e.games)},function(e){console.log(e)})},e.teamHasObjective=function(e,t){for(var o in e.completedObjectives){var a=e.completedObjectives[o].objective;if(a.id===t.id)return!0}return!1},e.sortPlayers=function(e){var t=["html","css","js"];e.sort(function(e){return t.indexOf(e.language.toLowerCase())})},t.nearestGame(function(t){e.games.push(t.data),e.getAllGames(t)},function(t){console.log(t),e.getAllGames()}),e.lastTimeClicked=(new Date).getTime()}]),angular.module("app.help",[]).config(["$stateProvider",function(e){e.state("help",{url:"/help",templateUrl:"/app/pages/help/helpView.html",controller:"HelpController"})}]).controller("HelpController",["$scope",function(e){}]),app.controller("HelpController",["$scope","$location","$anchorScroll",function(e,t,o){e.scrollTo=function(e){t.hash(e),o()}}]);var home=angular.module("app.home",["ui.router"]);home.config(["$stateProvider",function(e){e.state("home",{url:"/",templateUrl:"/app/pages/home/homeView.html",controller:"HomeController"})}]),home.controller("HomeController",["$scope","InfoService","DialogService","BlogService","$location","$anchorScroll","AuthService",function(e,t,o,a,n,r,i){e.DialogService=o,e.AuthService=i,e.updateInfo=function(){t.allInfo(function(t){e.info=t.data},function(e){console.log(e)}),t.bitsLeaderboard(function(t){e.bitsLeaderboard=t.data},function(e){console.log(e)}),t.xpLeaderboard(function(t){e.xpLeaderboard=t.data},function(e){console.log(e)}),a.allPosts(function(t){t.data.splice(2,t.data.length-2),e.posts=t.data,console.log(e.posts)},function(e){console.log(e)})},e.scrollToBlogPost=function(e){location.href="/blog#"+e},e.updateInfo()}]),angular.module("app.leaderboards",["ui.router"]).config(["$stateProvider",function(e){e.state("leaderboards",{url:"/leaderboards",templateUrl:"app/pages/leaderboards/leaderboardsView.html",controller:"LeaderboardsController"})}]).controller("LeaderboardsController",["$scope","InfoService",function(e,t){e.page=0,e.users=[],e.loadMore=function(){t.leaderboard(e.page,function(t){for(var o in t.data){var a=t.data[o][0];a.score=t.data[o][1],e.users.push(a)}e.page++},function(e){console.log(e)})},e.loadMore()}]),angular.module("app.liveGame",[]).config(["$stateProvider",function(e){e.state("livegame",{url:"/live",templateUrl:"/app/pages/livegame/livegameView.html",controller:"LiveGameController"})}]).controller("LiveGameController",["$scope","GameService",function(e,t){e.live=!1,t.currentGame(function(t){e.live=!0},function(t){e.live=!1})}]),angular.module("app.profile",[]).config(["$stateProvider",function(e){e.state("profile",{url:"/profile",templateUrl:"/app/pages/profile/profileView.html",controller:"ProfileController"})}]).controller("ProfileController",["$scope","AuthService","UserService","$location",function(e,t,o,a){e.AuthService=t;var n=a.search();n.username&&o.getPublicUser(n.username,function(t){e.user=t.data},function(e){console.log(e)})}]),angular.module("app.modCP",["ui.router"]).config(["$stateProvider",function(e){e.state("modCP",{url:"/modCP","abstract":!0,name:"modCP",templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"}).state("modCP.createGameView",{url:"/creategame",parent:"modCP",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPcreateGameView.html",controller:"ModCPController"}}}).state("modCP.createTeamsView",{url:"/createteams",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPcreateTeamsView.html",controller:"ModCPController"}}}).state("modCP.createObjectiveView",{url:"/createobjectives",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPcreateObjectivesView.html",controller:"ModCPController"}}}).state("modCP.liveGameView",{url:"/livegame",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPliveGameView.html",controller:"ModCPController"}}}).state("modCP.PostGameView",{url:"/postgame",parent:"modCP",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPPostGameView.html",controller:"ModCPController"}}})}]).controller("ModCPController",["$scope","GameService","ToastService","$filter","$mdDialog","$location",function(e,t,o,a,n,r){e.pickedDate=new Date,e.pickedTime=new Date,e.availableGames=null,e.dateWatch=function(){e.gameDate=new Date(e.pickedDate.getTime()),e.gameDate.setHours(e.pickedTime.getHours()),e.gameDate.setMinutes(e.pickedTime.getMinutes()),e.gameDate.setSeconds(0),e.gameDate.setMilliseconds(0)},e.updateGames=function(){t.allGames(0,10,function(t){if(e.availableGames=t.data,console.log(r.search()),r.search().game){var o=parseInt(r.search().game);e.availableGames.forEach(function(t){t.id===o&&(e.selectedGame=t)})}},angular.noop)},e.gameLabel=function(e){return a("date")(e.timestamp,"mediumDate")+" - "+e.name},e.createGame=function(){e.dateWatch(),t.createGame(e.name,e.gameDate.getTime(),function(e){o.showDevwarsToast("fa-check-circle","Success","Created Game")},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not create game")})},e.addPlayer=function(a){n.show({templateUrl:"/app/components/dialogs/addSelectedPlayerDialog/addSelectedPlayerDialogView.html",controller:"AddSelectedPlayerDialogController",locals:{player:a,game:e.selectedGame}}).then(function(n){t.addPlayer(n.team.id,e.selectedGame.id,n.language,JSON.stringify(a),function(t){e.updateSelectedGame()},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player")})},angular.noop)},e.updateSelectedGame=function(){t.getGame(e.selectedGame.id,function(t){e.selectedGame=t.data},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not refresh game")})},e.removePlayer=function(a){t.removePlayer(e.selectedGame.id,a.id,function(t){e.updateSelectedGame(),o.showDevwarsToast("fa-check-circle","Success","Removed "+a.user.username)},function(e){o.showDevwarsErrorToast("fa-exclamtion-circle","Error","Could not remove player")})},e.forfeitPlayer=function(a){t.forfeitUser(JSON.stringify(a),function(t){e.updateSelectedGame(),o.showDevwarsToast("fa-check-circle","Success","Forfeited Player")},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not forfeit player")})},e.toggleObjective=function(t,o){var a=e.teamHasObjective(o,t);console.log("Has Objective : "+a),a?o.completedObjectives=o.completedObjectives.filter(function(e){return e.objective.id!==t.id}):o.completedObjectives.push({objective:t,team_id:o.id}),console.log(o.completedObjectives)},e.teamHasObjective=function(e,t){var o=!1;return e.completedObjectives.forEach(function(e){e.objective.id==t.id&&(o=!0)}),o},e.activateGame=function(a){t.activateGame(a.id,function(t){o.showDevwarsToast("fa-check-circle","Success","Activated Game"),e.updateSelectedGame()},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not activate game")})},e.deactivateGame=function(a){t.deactivateGame(a.id,function(t){o.showDevwarsToast("fa-check-circle","Success","Deactivated Game"),e.updateSelectedGame()},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not deactivate game")})},e.saveGame=function(a){a.objectives&&(a.objectives=a.objectives.filter(function(e){return e.objectiveText.length>0}));for(var n in a.teams){var r=a.teams[n];r.completedObjectives&&(r.completedObjectives=r.completedObjectives.filter(function(e){var t=!1;return a.objectives&&a.objectives.forEach(function(o){o.id==e.objective.id&&(t=!0)}),t}))}a.objectives.forEach(function(e,t){e.orderID=t}),t.editGame(a.id,JSON.stringify(a),function(t){o.showDevwarsToast("fa-check-circle","Success","Saved game"),e.selectedGame=t.data},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not save game")})},e.endGame=function(a,n){t.endGame(a.id,n.id,function(t){e.updateSelectedGame(),o.showDevwarsToast("fa-check-circle","Success",n.name+" won : Game Over")},function(e){o.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not end game")})},e.$watch("selectedGame",function(o,a){t.pendingPlayers(e.selectedGame.id,function(t){e.selectedGame.appliedUsers=t.data},angular.noop)}),e.updateGames()}]),angular.module("app.settings",["ui.router"]).config(["$stateProvider",function(e){e.state("settings",{url:"/settings","abstract":!0,name:"settings",templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"}).state("settings.accountView",{url:"",parent:"settings",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsAccountView.html",controller:"SettingsController"}}}).state("settings.profileView",{url:"/profile",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsProfileView.html",controller:"SettingsController"}}}).state("settings.notificationsView",{url:"/notifications",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsNotificationsView.html",controller:"SettingsController"}}}).state("settings.connectView",{url:"/connections",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsConnectView.html",controller:"SettingsController"}}})}]).controller("SettingsController",["$scope","AuthService","$http","$mdDialog","ToastService","UserService","$location","DialogService",function(e,t,o,a,n,r,i,l){e.AuthService=t;var s=i.search();e.initProfile=function(){t.user?(e.profile=t.user,console.log(e.profile)):(e.profile={},t.callbacks.push(e.initProfile))},e.checkVeteran=function(){if(t.user){if(s.veteran){var o=null;for(var a in t.user.connectedAccounts)"TWITCH"===t.user.connectedAccounts[a].provider&&(o=t.user.connectedAccounts[a].username);l.showConfirmDialog("Account Transfer","We have record that you have played in Season 1 with your Twitch account "+o+". We have that username reserved for you. Would you like to claim it or keep your existing username? If you keep your username, we will release the username "+o+" to the public.","Claim "+o,"Keep my username",null).then(function(e){r.claimTwitch(function(e){location.href="/settings/connections"},function(e){n.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},function(e){r.releaseUsername(function(e){location.href="/settings/connections"},function(e){n.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})})}}else t.callbacks.push(e.checkVeteran)},e.disconnect=function(e){t.hasProvider(e)?o({method:"GET",url:"/v1/connect/"+e+"/disconnect"}).then(function(e){console.log(e),location.reload()},function(e){console.log(e)}):location.href="/v1/connect/"+e},e.editAvatarImage=function(e,t){a.show({templateUrl:"/app/components/dialogs/editAvatarImageDialog/editAvatarImageView.html",controller:"EditAvatarImageDialogController",clickOutsideToClose:!1,locals:{image:e}}).then(function(e){location.reload()},function(e){})},e.passwordsMatch=function(e){return e.newPassword1===e.newPassword2},e.changePassword=function(e){e.newPassword1&&e.newPassword2&&e.newPassword1===e.newPassword2&&r.changePassword(e.newPassword1,e.currentPassword,function(e){n.showDevwarsToast("fa-check-circle","Success","Changed your password")},function(e){n.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},e.changeEmail=function(e){e.newEmail&&e.currentPassword&&r.changeEmail(e.newEmail,e.currentPassword,function(e){n.showDevwarsToast("fa-check-circle","Success","Changed Email"),t.init()},function(e){n.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},e.updateInfo=function(e){r.updateInfo(e.company,e.location,e.url,e.username,function(e){location.reload()},function(e){n.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},e.$watch("selectedAvatarImage",function(t,o){t!==o&&e.editAvatarImage(e.selectedAvatarImage)}),e.initProfile()}]),angular.module("app.shop",[]).config(["$stateProvider",function(e){e.state("shop",{url:"/shop",templateUrl:"/app/pages/shop/shopView.html",controller:"ShopController"})}]).controller("ShopController",["$scope",function(e){}]),angular.module("app.verify",[]).config(["$stateProvider",function(e){e.state("verify",{url:"/verify",templateUrl:"/app/pages/verify/verifyView.html",controller:"VerifyController"})}]).controller("VerifyController",["$scope",function(e){}]),app.controller("VerifyController",["$scope","$location","$anchorScroll","$interval",function(e,t,o,a){var n=t.search();e.username=n.username,e.seconds=10,a(function(){e.seconds--,0===e.seconds&&(location.href="/#/dashboard")},1e3,10,!0),e.scrollTo=function(e){t.hash(e),o()}}]),angular.module("app.warriorReg",[]).config(["$stateProvider",function(e){e.state("warriorReg",{url:"/warrior-signup",templateUrl:"/app/pages/warriorReg/warriorRegView.html",controller:"warriorRegController"})}]).controller("warriorRegController",["$scope","AuthService","WarriorService","ToastService","$http",function(e,t,o,a,n){e.AuthService=t,e.warrior={},e.warrior.htmlRate=1,e.warrior.cssRate=1,e.warrior.jsRate=1,e.initWarrior=function(){t.user?(console.log(t.user),t.user.warrior&&(location.href="/")):t.callbacks.push(e.initWarrior)},e.skillNames=["Novice","Beginner","Intermediate","Advanced","Expert"],e.htmlTooltips=["You have a basic understanding of HTML, and can use essential tags.","You have a working knowledge of HTML. You understand the basic syntax and methodology of ordering and adding elements to the DOM (Document Object Model).","You have a strong understanding of HTML, and ability to structure a webpage. You have a knowledge of a variety of attributes, and know how to use them correctly. You have a strong understanding of semantics and structural meaning (parameter usage) .","You have worked on larger scale projects, and collaborated with other people. You have strong experience working on various development projects. You have worked with SEO tools.","You use HTML at a production level. You can create websites from scratch with no use of frameworks, and have worked as a front-end developer. You have used Shadow DOM in the past."],e.cssTooltips=["You have basic knowledge of CSS. You understand the basic syntax and methodology of cascading stylesheets","You have a working knowledge of CSS. You have style elements, and know about different frameworks. You have used Bootstrap. You have heard of pre-processors. ","You have extensive CSS knowledge. You have experience working with responsive design, and understand the mobile-first ideology. You understand the issues that can occur with different browsers. You have used a CMS in the past, and can style elements on them ","You have worked on larger scale projects, and collaborated with other people. You have strong experience working on various development projects. You understand BEM practices, and implement them ","You use CSS at a production level. You can style websites from scratch with no use of frameworks, and have worked as a front-end developer"],e.jsTooltips=["You have a basic knowledge of JavaScript.","You have working knowledge of JavaScript. You understand the basic syntax and methodology of OOP","You have used Javascript with a popular library or framework, and used it for DOM manipulation.","You have worked on larger scale projects, and collaborated with other people. You have strong experience working on various development projects. You have knowledge of MVC and it's use in creating web application.","You use JavaScript at a production level. You make full use of MVC and MV Frameworks, have and incredible understaning of OOP, and have worked as a professional front-end developer"],e.htmlTooltip=e.htmlTooltips[0],e.cssTooltip=e.cssTooltips[0],e.jsTooltip=e.jsTooltips[0],e.getRange=function(e,t){for(var o=[],a=e;t>=a;a++)o.push(a);return o},e.setHtml=function(t){e.htmlTooltip=e.htmlTooltips[t-1],e.warrior.htmlRate=t},e.setCSS=function(t){e.cssTooltip=e.cssTooltips[t-1],e.warrior.cssRate=t},e.setJS=function(t){e.jsTooltip=e.jsTooltips[t-1],e.warrior.jsRate=t},e.register=function(t){e.hasTS?n({url:"/v1/warrior/register",method:"GET",params:t}).then(function(e){a.showDevwarsToast("fa-check-circle","Success","Registered to be a warrior"),setTimeout(function(){location.href="/"},2e3)},function(e){400===e.status?a.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing Parameters"):a.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)}):a.showDevwarsErrorToast("fa-exclamation-circle","Error","You must have Teamspeak to be a warrior")},e.initWarrior()}]),angular.module("app.addBlogPostDialog",[]).controller("AddBlogPostDialogController",["$scope","BlogService","$mdDialog","ToastService",function(e,t,o,a){e.done=function(){e.title&&e.description&&e.text&&e.image_url?t.createBlog(e.image_url,e.description,e.text,e.title,o.hide,o.cancel):e.title||e.description?e.title?e.description||a.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing post field"):a.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing title field"):a.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing input fields")},e.cancel=function(){o.cancel()}}]).controller("EditBlogPostDialogController",["$scope","post","$mdDialog","BlogService","ToastService",function(e,t,o,a,n){e.title=t.title,e.image_url=t.image_url,e.description=t.description,e.text=t.text,e.done=function(){a.updateBlog(t.id,e.image_url,e.description,e.text,e.title,function(e){console.log(e),o.hide()},function(e){console.log(e),n.showDevwarsErrorToast("fa-exclamation-circle","Error","Couldn't update post")})},e.cancel=function(){o.cancel()}}]),angular.module("app.addPlayerDialog",[]).controller("AddPlayerDialogController",["$scope","game","$mdDialog","GameService","ToastService",function(e,t,o,a,n){e.game=t,e.$mdDialog=o,e.pendingPlayers=[],a.pendingPlayers(t.id,function(t){console.log(t.data),e.game.pendingPlayers=t.data},function(e){console.log(e)}),e.teamSearchQuery=function(){var o=[];for(var a in t.teams)o.push(t.teams[a]);return o.filter(function(t){return console.log(e.selectedTeam),t.name.toLowerCase().indexOf(e.teamSearchText.toLowerCase())>-1||e.teamSearchText.toLowerCase().indexOf(t.name.toLowerCase())>-1})},e.pendingPlayersQuery=function(){return e.game.pendingPlayers?e.game.pendingPlayers.filter(function(t){return t.username.toLowerCase().indexOf(e.searchText.toLowerCase())>-1||e.searchText.toLowerCase().indexOf(t.username.toLowerCase())>-1}):void 0},e.selectedUserChange=function(){e.searchText=e.selectedUser.username},e.selectedTeamChange=function(){e.teamSearchText=e.selectedTeam.name},e.done=function(){if(e.conflicts=[],!e.selectedUser&&e.searchText)for(var t=0;t<e.game.pendingPlayers.length;t++){var r=e.game.pendingPlayers[t];r.username.toUpperCase()===e.searchText.toUpperCase()&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:r.id}})}else e.selectedUser&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:e.selectedUser.id}});e.selectedPlayer?a.addPlayer(e.selectedTeam.id,e.game.id,e.selectedPlayer,function(e){o.hide({newPlayer:e.data})},function(e){409===e.status?n.showDevwarsErrorToast("fa-exclamation-circle","Error","Player is already in game."):n.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player.")}):n.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player.")},e.cancel=function(){}}]),angular.module("app.addSelectedPlayerDialog",[]).controller("AddSelectedPlayerDialogController",["$scope","player","game","$mdDialog",function(e,t,o,a){e.$mdDialog=a,e.game=o}]),angular.module("app.gameSignupConfirm",[]).controller("GameSignupConfirmDialogController",["$scope","$mdDialog","game",function(e,t,o){e.game=o,e.$mdDialog=t,e.confirmSignUp=function(){t.hide({game:o})},e.cancelSignUp=function(){t.cancel()}}]),angular.module("app.editAvatarImage",[]).controller("EditAvatarImageDialogController",["$scope","image","$http","$mdDialog","ToastService",function(e,t,o,a,n){e.image=t,e.myCroppedImage="",e.testImage=new Image,e.testImage.src=t,e.$mdDialog=a,e.minSize=Math.min(e.testImage.width,e.testImage.height),setTimeout(function(){e.minSize=50},500),e.uploadImage=function(e){var t=new FormData;t.append("file",r(e)),o.post("/v1/user/changeavatar",t,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){a.hide()},function(e){n.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})};var r=function(e){for(var t=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],a=[],n=0;n<t.length;n++)a.push(t.charCodeAt(n));return new Blob([new Uint8Array(a)],{type:o})}}]),angular.module("app.confirmDialog",[]).controller("ConfirmDialogController",["$scope","$mdDialog","title","message","yes","no",function(e,t,o,a,n,r){e.$mdDialog=t,e.title=o,e.message=a,e.yes=n,e.no=r}]),angular.module("app.editPlayerDialog",[]).controller("EditPlayerDialogController",["$scope","game","player","team","$mdDialog","GameService","ToastService",function(e,t,o,a,n,r,i){e.game=t,e.player=o,e.selectedUser=o.user,e.selectedLanguage=o.language,e.selectedTeam=a,e.searchText=o.user.username,e.teamSearchText=a.name,e.pendingPlayers=[],e.$mdDialog=n,r.pendingPlayers(t.id,function(t){console.log(t.data),e.game.pendingPlayers=t.data},function(e){console.log(e)}),e.teamSearchQuery=function(){var o=[];for(var a in t.teams)o.push(t.teams[a]);return o.filter(function(t){return console.log(e.selectedTeam),t.name.toLowerCase().indexOf(e.teamSearchText.toLowerCase())>-1||e.teamSearchText.toLowerCase().indexOf(t.name.toLowerCase())>-1})},e.pendingPlayersQuery=function(){return e.game.pendingPlayers?e.game.pendingPlayers.filter(function(t){return t.username.toLowerCase().indexOf(e.searchText.toLowerCase())>-1||e.searchText.toLowerCase().indexOf(t.username.toLowerCase())>-1}):void 0},e.selectedUserChange=function(){e.searchText=e.selectedUser.username},e.selectedTeamChange=function(){console.log("Team Change"),e.teamSearchText=e.selectedTeam.name},e.done=function(){if(e.conflicts=[],e.selectedUser===o.user&&e.searchText)for(var t=0;t<e.game.pendingPlayers.length;t++){var a=e.game.pendingPlayers[t];a.username.toUpperCase()===e.searchText.toUpperCase()&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:a.id}})}else e.selectedUser!==o.user&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:e.selectedUser.id}});e.selectedPlayer&&e.selectedPlayer.user!==o.user?r.editPlayer(e.selectedTeam.id,e.game.id,o.id,e.selectedPlayer,function(e){n.hide({oldPlayer:o,newPlayer:e.data})},angular.noop):i.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not edit player.")},e.cancel=function(){n.cancel()}}]),angular.module("app").controller("LoginDialogController",["$scope","AuthService","$mdDialog",function(e,t,o){e.$mdDialog=o,e.login=function(o){e.incorrectCredentials=!1,t.login(o,function(e){console.log(e)},function(t){401===t.status&&(e.incorrectCredentials=!0),console.log(t)})},e.oauthLogin=function(e){console.log(e),window.location="/v1/oauth/"+e}}]),angular.module("app.InputDialog",[]).controller("InputDialogController",["$scope","$mdDialog","title","message",function(e,t,o,a){e.$mdDialog=t,e.title=o,e.message=a}]),angular.module("app.signup",[]).controller("SignupDialogController",["$scope","AuthService","vcRecaptchaService","ToastService","$location","$mdDialog",function(e,t,o,a,n,r){e.conflicts=[],e.credentials={},e.$mdDialog=r,e.setWidgetId=function(t){e.widgetId=t},e.setResponse=function(t){console.log(t),e.credentials.captchaResponse=t},e.signup=function(o){e.conflicts=[],e.successMessages=[];var i=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(o.email),l=/^([A-Za-z0-9\-_]+)$/.test(o.username),s=o.password&&o.password2&&o.password===o.password2;

l||e.conflicts.push("Username can contain characters, numbers and underscores"),i||e.conflicts.push("Invalid Email Address"),s||e.conflicts.push("Passwords do not match");var c=n.search();c.referral&&(o.referral=c.referral),i&&s&&l&&t.signup(o,function(e){a.showDevwarsToast("fa-check-circle","Sign Up Success","We've sent you an email, it should arrive shortly",5e3),r.cancel()},function(t){console.log(t),409===t.status&&(e.conflicts=t.data)})}}]),angular.module("app.devwarsToast",[]).controller("DevWarsToastController",["$scope","$mdDialog","faIcon","title","message",function(e,t,o,a,n){e.faIcon=o,e.title=a,e.message=n}]);
var app=angular.module("app",["app.coming","app.AuthService","app.header","app.home","app.signup","app.gameControlPanel","app.GameService","app.BlogService","app.InfoService","app.UserService","app.WarriorService","app.ContactService","app.games","app.gameSignupConfirm","app.editPlayerDialog","app.addPlayerDialog","app.addSelectedPlayerDialog","app.addBlogPostDialog","app.InputDialog","app.devwarsToast","app.toastService","app.BadgeService","app.blog","app.user","pickadate","app.contact","app.about","app.dashboard","app.badges","app.warriorReg","app.DialogService","app.settings","app.help","app.liveGame","app.verify","app.enterDirective","app.subscribeDirective","app.shop","app.OAuthDirective","app.sidebar","app.editAvatarImage","app.fileread","app.rank","app.profile","app.dashnav","app.confirmDialog","app.leaderboards","app.modCP","LivePoll-Client","LivePoll-Display","Progress","Tooltip","ngCookies","ngMaterial","vcRecaptcha","textAngular","n3-pie-chart","ngImgCrop"]);app.config(["$urlRouterProvider","$httpProvider","$locationProvider",function(p,a,e){p.otherwise("/"),a.defaults.transformResponse=function(p){try{return JSON.parse(p)}catch(a){return p}},a.defaults.transformRequest=function(p){var a=[];for(var e in p)a.push(encodeURIComponent(e)+"="+encodeURIComponent(p[e]));return a.join("&")},a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",e.html5Mode(!0)}]),app.filter("reverse",function(){return function(p){return p.reverse()}}),app.filter("players",function(){return _.memoize(function(p){var a=["html","css","js"];return p.sort(function(p){return a.indexOf(p.language.toLowerCase())}),p})});
angular.module("app.enterDirective",[]).directive("ngEnter",function(){return function(n,e,t){e.bind("keydown keypress",function(e){13===e.which&&(n.$apply(function(){n.$eval(t.ngEnter)}),e.preventDefault())})}});
angular.module("app.fileread",[]).directive("fileread",function(){return{restrict:"A",scope:{fileread:"="},link:function(e,a){a.bind("change",function(a){var n=new FileReader;n.onload=function(a){e.$apply(function(e){e.fileread=a.target.result})},n.readAsDataURL(a.target.files[0])})}}});
angular.module("app.OAuthDirective",[]).directive("oauth",function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,e,r){e.bind("click",function(){r.provider&&(location.href="/v1/oauth/"+r.provider)})}]}});
angular.module("app.subscribeDirective",[]).directive("subscribe",function(){return{restrict:"A",controller:["AuthService","$element",function(e,i){i.bind("click",function(){var i="//devwars.us10.list-manage.com/subscribe/post?u=0719cdf11a95678dd04e5db33&id=02e4f24ca1";e.user&&e.user.email&&(i+="&EMAIL="+e.user.email),window.open(i,"_blank")})}]}});
angular.module("app.AuthService",[]).factory("AuthService",["$http",function(n){var e={};return e.callbacks=[],e.init=function(){n({method:"GET",url:"/v1/user/"}).then(function(n){console.log(n),e.setUser(n.data);for(var r=0;r<e.callbacks.length;r++)e.callbacks[r](n.data)},function(n){})},e.login=function(e,r,o){return n({method:"GET",url:"/v1/user/login",params:e}).then(function(n){location.href="/dashboard"},function(n){console.log(n),o(n)})},e.signup=function(e,r,o){return n({method:"POST",url:"/v1/user/create",params:e}).then(function(n){r(n)},function(n){o(n)})},e.logout=function(){return n({method:"GET",url:"/v1/user/logout"}).then(function(n){location.href="/"},function(n){console.log(n)})},e.setUser=function(n){e.user=n},e.isAdmin=function(){return e.user?"ADMIN"===e.user.role:!1},e.hasProvider=function(n){if(!e.user||!e.user.connectedAccounts)return!1;for(var r in e.user.connectedAccounts){var o=e.user.connectedAccounts[r];if(o.provider.toUpperCase()===n.toUpperCase()&&0==o.disconnected)return!0}return!1},e.hasConnectedToProvider=function(n){if(!e.user||!e.user.connectedAccounts)return!1;for(var r in e.user.connectedAccounts){var o=e.user.connectedAccounts[r];if(o.provider.toUpperCase()===n.toUpperCase())return!0}return!1},e}]);
angular.module("app.BadgeService",[]).factory("BadgeService",["$http",function(e){var a={};return a.getAll=function(a,n){e({method:"GET",url:"/v1/badge/all",params:{}}).then(function(e){a(e)},function(e){n(e)})},a}]);
angular.module("app.BlogService",[]).factory("BlogService",["$http",function(t){var n={};return n.deleteBlog=function(n,e,o){t({method:"GET",url:"/v1/blog/"+n+"/delete",params:{}}).then(function(t){e(t)},function(t){o(t)})},n.getBlog=function(n,e,o){t({method:"GET",url:"/v1/blog/"+n,params:{}}).then(function(t){e(t)},function(t){o(t)})},n.updateBlog=function(n,e,o,l,u,i,a){t({method:"GET",url:"/v1/blog/"+n+"/update",params:{image_url:e,description:o,text:l,title:u}}).then(function(t){i(t)},function(t){a(t)})},n.allPosts=function(n,e){t({method:"GET",url:"/v1/blog/all",params:{}}).then(function(t){n(t)},function(t){e(t)})},n.createBlog=function(n,e,o,l,u,i){t({method:"GET",url:"/v1/blog/create",params:{image_url:n,description:e,text:o,title:l}}).then(function(t){u(t)},function(t){i(t)})},n}]);
angular.module("app.ContactService",[]).factory("ContactService",["$http",function(t){var e={};return e.create=function(e,n,a,c,r,o){t({method:"GET",url:"/v1/contact/create",params:{name:e,text:n,type:a,email:c}}).then(function(t){r(t)},function(t){o(t)})},e}]);
angular.module("app.DialogService",[]).factory("DialogService",["GameService","ToastService","$mdDialog","AuthService","$filter","$state",function(o,e,a,n,t,r){var i={};return i.applyForNearestGame=function(a){o.nearestGame(function(o){i.applyForGame(o.data,a)},function(o){e.showDevwarsErrorToast("fa fa-exclamation-circle","Error","No upcoming games")})},i.applyForCurrentGame=function(a){o.currentGame(function(o){i.applyForGame(o.data,a)},function(o){e.showDevwarsErrorToast("fa fa-exclamation-circle","Error","No upcoming games")})},i.applyForGame=function(l,s,c,g){n.user&&n.user.warrior?a.show({controller:"GameSignupConfirmDialogController",templateUrl:"app/components/dialogs/confirmGameSignupDialog/confirmGameSignupDialogView.html",targetEvent:s,locals:{game:l}}).then(function(a){o.signupForGame(a.game.id,function(o){n.init(),e.showDevwarsToast("fa-calendar","Game applied for",t("date")(l.timestamp,"medium"))},function(o){e.showDevwarsErrorToast("fa-exclamation-circle","Error",o.data)})},null):n.user?(r.go("warriorReg"),e.showDevwarsErrorToast("fa-exclamation-circle","Error","Please signup to be a warrior")):i.login(s)},i.login=function(o){a.show({templateUrl:"/app/components/dialogs/loginDialog/loginDialogView.html",controller:"LoginDialogController",targetEvent:o,clickOutsideToClose:!0,escapeToClose:!0}).then(function(o){},function(e){e&&e.register&&i.signup(o)})},i.signup=function(o){a.show({templateUrl:"/app/components/dialogs/signupDialog/signupDialogView.html",controller:"SignupDialogController",targetEvent:o,clickOutsideToClose:!0,escapeToClose:!0}).then(function(o){},function(e){e&&e.login&&i.login(o)})},i.getInputWithMessage=function(o,e,n,t){a.show({templateUrl:"app/components/dialogs/inputDialog/inputDialogView.html",controller:"InputDialogController",targetEvent:n,locals:{title:o,message:e}}).then(function(o){t(o)},function(o){})},i.showConfirmDialog=function(o,e,n,t,r){return a.show({templateUrl:"app/components/dialogs/confirmDialog/confirmDialogView.html",controller:"ConfirmDialogController",targetEvent:r,locals:{title:o,message:e,yes:n,no:t}})},i}]);
angular.module("app.GameService",[]).factory("GameService",["$http",function(n){var e={};return e.resetVeteranGames=function(e,t){n({method:"GET",url:"/v1/game/resetVeteranGames",params:{}}).then(function(n){e(n)},function(n){t(n)})},e.editPlayer=function(e,t,a,o,u,m){n({method:"GET",url:"/v1/game/"+t+"/team/"+e+"/player/"+a+"/edit",params:{json:o}}).then(function(n){u(n)},function(n){m(n)})},e.pastGames=function(e,t){n({method:"GET",url:"/v1/game/pastgames",params:{}}).then(function(n){e(n)},function(n){t(n)})},e.addPlayer=function(e,t,a,o,u,m){n({method:"POST",url:"/v1/game/"+t+"/team/"+e+"/add",data:{language:a,user:o}}).then(function(n){u(n)},function(n){m(n)})},e.upcomingGames=function(e,t){n({method:"GET",url:"/v1/game/upcoming",params:{}}).then(function(n){e(n)},function(n){t(n)})},e.allGames=function(e,t,a,o){n({method:"GET",url:"/v1/game/",params:{offset:e,count:t}}).then(function(n){a(n)},function(n){o(n)})},e.latestGame=function(e,t){n({method:"GET",url:"/v1/game/latestgame",params:{}}).then(function(n){e(n)},function(n){t(n)})},e.endGame=function(e,t,a,o){n({method:"GET",url:"/v1/game/"+e+"/endgame",params:{winner:t}}).then(function(n){a(n)},function(n){o(n)})},e.removePlayer=function(e,t,a,o){n({method:"GET",url:"/v1/game/"+e+"/player/"+t+"/remove",params:{}}).then(function(n){a(n)},function(n){o(n)})},e.currentGame=function(e,t){n({method:"GET",url:"/v1/game/currentgame",params:{}}).then(function(n){e(n)},function(n){t(n)})},e.editGame=function(e,t,a,o){n({method:"POST",url:"/v1/game/"+e+"/update",data:{json:t}}).then(function(n){a(n)},function(n){o(n)})},e.pendingPlayers=function(e,t,a){n({method:"GET",url:"/v1/game/"+e+"/pendingplayers",params:{}}).then(function(n){t(n)},function(n){a(n)})},e.forfeitUser=function(e,t,a){n({method:"POST",url:"/v1/game/forfeituser",data:{player:e}}).then(function(n){t(n)},function(n){a(n)})},e.createGame=function(e,t,a,o){n({method:"GET",url:"/v1/game/create",params:{name:e,time:t}}).then(function(n){a(n)},function(n){o(n)})},e.activateGame=function(e,t,a){n({method:"GET",url:"/v1/game/"+e+"/activate",params:{}}).then(function(n){t(n)},function(n){a(n)})},e.signupForGame=function(e,t,a){n({method:"GET",url:"/v1/game/"+e+"/signup",params:{}}).then(function(n){t(n)},function(n){a(n)})},e.addVotes=function(e,t,a,o,u,m,i){n({method:"GET",url:"/v1/game/"+t+"/team/"+e+"/addvotes",params:{code:a,func:o,design:u}}).then(function(n){m(n)},function(n){i(n)})},e.nearestGame=function(e,t){n({method:"GET",url:"/v1/game/nearestgame",params:{}}).then(function(n){e(n)},function(n){t(n)})},e.addPointsToTeam=function(e,t,a,o,u,m){n({method:"GET",url:"/v1/game/"+t+"/team/"+e+"/addpoints",params:{xp:a,points:o}}).then(function(n){u(n)},function(n){m(n)})},e.getGame=function(e,t,a){n({method:"GET",url:"/v1/game/"+e,params:{}}).then(function(n){t(n)},function(n){a(n)})},e.deleteGame=function(e,t,a){n({method:"GET",url:"/v1/game/"+e+"/delete",params:{}}).then(function(n){t(n)},function(n){a(n)})},e.deactivateGame=function(e,t,a){n({method:"GET",url:"/v1/game/"+e+"/deactivate",params:{}}).then(function(n){t(n)},function(n){a(n)})},e}]);
angular.module("app.InfoService",[]).factory("InfoService",["$http",function(n){var o={};return o.allInfo=function(o,a){n({method:"GET",url:"/v1/info/",params:{}}).then(function(n){o(n)},function(n){a(n)})},o.xpLeaderboard=function(o,a){n({method:"GET",url:"/v1/info/xpleaderboard",params:{}}).then(function(n){o(n)},function(n){a(n)})},o.bitsLeaderboard=function(o,a){n({method:"GET",url:"/v1/info/bitsleaderboard",params:{}}).then(function(n){o(n)},function(n){a(n)})},o.leaderboard=function(o,a,e){n({method:"GET",url:"/v1/info/leaderboard",params:{page:o}}).then(function(n){a(n)},function(n){e(n)})},o}]);
angular.module("app.MailingListService",[]).factory("MailingListService",["$http",function(i){var a={};return a}]);
angular.module("app.toastService",[]).factory("ToastService",["$mdToast",function(o){var t={};return t.showDevwarsToast=function(t,a,e,r){return o.show({templateUrl:"/app/components/toasts/devwarsToast/devwarsToastView.html",controller:"DevWarsToastController",locals:{faIcon:t,title:a,message:e},delay:r?r:3e3})},t.showDevwarsErrorToast=function(t,a,e,r){return o.show({templateUrl:"/app/components/toasts/devwarsToast/devwarsErrorToastView.html",controller:"DevWarsToastController",locals:{faIcon:t,title:a,message:e},delay:r?r:3e3})},t}]);
angular.module("app.UserService",[]).factory("UserService",["$http",function(n){var t={};return t.user=function(t,e){n({method:"GET",url:"/v1/user/",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.login=function(t,e,u,o){n({method:"GET",url:"/v1/user/login",params:{password:t,username:e}}).then(function(n){u(n)},function(n){o(n)})},t.logout=function(t,e){n({method:"GET",url:"/v1/user/logout",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.createUser=function(t,e,u,o,a,i,r){n({method:"GET",url:"/v1/user/create",params:{captchaResponse:t,password:e,referral:a,email:u,username:o}}).then(function(n){i(n)},function(n){r(n)})},t.getUser=function(t,e,u){n({method:"GET",url:"/v1/user/"+t,params:{}}).then(function(n){e(n)},function(n){u(n)})},t.addPoints=function(t,e,u,o,a){n({method:"GET",url:"/v1/user/"+t+"/addpoints",params:{xp:e,points:u}}).then(function(n){o(n)},function(n){a(n)})},t.validateUser=function(t,e,u){n({method:"GET",url:"/v1/user/validate",params:{uid:t}}).then(function(n){e(n)},function(n){u(n)})},t.changeAvatar=function(t,e,u){n({method:"GET",url:"/v1/user/changeavatar",params:{file:t}}).then(function(n){e(n)},function(n){u(n)})},t.getActivities=function(t,e){n({method:"GET",url:"/v1/user/activity",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.updateInfo=function(t,e,u,o,a,i){n({method:"GET",url:"/v1/user/updateinfo",params:{company:t,location:e,url:u,username:o}}).then(function(n){a(n)},function(n){i(n)})},t.appliedGames=function(t,e){n({method:"GET",url:"/v1/user/appliedgames",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.getPublicUser=function(t,e,u){n({method:"GET",url:"/v1/user/"+t+"/public",params:{}}).then(function(n){e(n)},function(n){u(n)})},t.getUserAvatar=function(t,e,u){n({method:"GET",url:"/v1/user/"+t+"/avatar",params:{}}).then(function(n){e(n)},function(n){u(n)})},t.changeEmail=function(t,e,u,o){n({method:"GET",url:"/v1/user/changeemail",params:{newEmail:t,currentPassword:e}}).then(function(n){u(n)},function(n){o(n)})},t.getAvatar=function(t,e){n({method:"GET",url:"/v1/user/avatar",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.deleteUser=function(t,e,u){n({method:"GET",url:"/v1/user/"+t+"/delete",params:{}}).then(function(n){e(n)},function(n){u(n)})},t.changePassword=function(t,e,u,o){n({method:"GET",url:"/v1/user/changepassword",params:{newPassword:t,currentPassword:e}}).then(function(n){u(n)},function(n){o(n)})},t.claimTwitch=function(t,e){n({method:"GET",url:"/v1/user/claimtwitch",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.getBadges=function(t,e){n({method:"GET",url:"/v1/user/badges",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.testEmail=function(t,e,u,o){n({method:"GET",url:"/v1/user/testemail",params:{uid:t,email:e}}).then(function(n){u(n)},function(n){o(n)})},t.releaseUsername=function(t,e){n({method:"GET",url:"/v1/user/releasetwitch",params:{}}).then(function(n){t(n)},function(n){e(n)})},t.markNotificationsAsRead=function(t,e,u){n({method:"POST",url:"/v1/user/notifications/read",data:{notifications:t}}).then(function(n){e(n)},function(n){u(n)})},t.getUnreadNotifications=function(t,e){n({method:"GET",url:"/v1/user/notifications",params:{}}).then(function(n){t(n)},function(n){e(n)})},t}]);
angular.module("app.WarriorService",[]).factory("WarriorService",["$http",function(r){var a={};return a.register=function(a,t,o,e,n,i,c,u,f,m,s,l,v,h,p){r({method:"GET",url:"/v1/warrior/register",params:{cssRate:a,year:t,about:o,htmlRate:e,firstName:n,month:i,jsRate:c,c9Name:u,location:f,company:v,favFood:m,favTool:s,day:l}}).then(function(r){h(r)},function(r){p(r)})},a}]);
angular.module("app.footer",[]).controller("footerController",["$scope","$mdDialog","DialogService",function(o,e,l){o.DialogService=l}]);
angular.module("app.header",["ngCookies"]).controller("HeaderController",["$scope","$mdDialog","AuthService","GameService","$filter","DialogService","$state","$cookies","$cookieStore","UserService","ToastService",function(e,t,a,o,n,i,r,c,s,m,u){a.init(),e.AuthService=a,e.$state=r,e.hasInit=!1,e.DialogService=i,e.$cookies=c,o.currentGame(function(t){e.currentGame=t.data,e.currentGameMessage="We're live right now : "+n("date")(e.currentGame.timestamp,"shortTime")+" on "+n("date")(e.currentGame.timestamp,"longDate")},function(t){e.currentGame={},o.nearestGame(function(t){e.nearestGame=t.data,e.nearestGameMessage="Next Game @ "+n("date")(e.nearestGame.timestamp,"shortTime")+" on "+n("date")(e.nearestGame.timestamp,"longDate")},function(t){e.currentGame={}})}),e.logout=function(){a.logout()},m.getUnreadNotifications(function(e){e.data.forEach(function(e,t){setTimeout(function(){u.showDevwarsToast("fa-check-circle","Notification",e.notificationText)},3e3*t)}),m.markNotificationsAsRead(JSON.stringify(e.data),angular.noop,angular.noop)},angular.noop)}]);
angular.module("app.user",[]).controller("UserController",["$scope","UserService","ToastService",function(e,o,n){e.user=null,e.updateUser=function(){o.getUser(e.user.id,function(o){e.user=o.data},function(e){console.log(e)})},e.setUserId=function(n){o.getUser(n,function(o){e.user=o.data,console.log(e.user)},angular.noop)},e.setUser=function(o){e.user=o,console.log(e.user)},e.addPoints=function(s){o.addPoints(e.user.id,0,s,function(o){n.showDevwarsToast("fa-check-circle",(s>0?"Added":"Subtracted")+" points",(s>0?"Added":"Subtracted")+" "+s+" points"),e.updateUser()},angular.noop)}}]);
var _twitchUsername="b3zman41",_appServer="http://dragon.umryn.net:22050";!function(t,o){var e=t.module("angularSpectrumColorpicker",[]);!function(o){e.directive("spectrumColorpicker",function(){return{restrict:"E",require:"ngModel",scope:!1,replace:!0,template:'<span><input class="input-small" /></span>',link:function(e,n,l,i){function r(o){var e=a;o?e=o.toString(s):t.isUndefined(a)&&(e=o),i.$setViewValue(e)}var u=n.find("input"),a=e.$eval(l.fallbackValue),s=e.$eval(l.format)||o,c=function(t){e.$apply(function(){r(t)})},p=function(){return u.spectrum("toggle"),!1},f=t.extend({color:i.$viewValue,change:c,move:c,hide:c},e.$eval(l.options));l.triggerId&&t.element(document.body).on("click","#"+l.triggerId,p),i.$render=function(){u.spectrum("set",i.$viewValue||"")},f.color&&(u.spectrum("set",f.color||""),r(f.color)),u.spectrum(f),e.$on("$destroy",function(){u.spectrum("destroy")})}}})}()}(window.angular),function(){angular.module("LivePoll-Client",["Progress","Tooltip","angularSpectrumColorpicker"]).config(["$interpolateProvider",function(t){}])}(),function(){function t(t,o,e,n){o.connected=!1,o.throttled=!1,o.user=null,o.defaultStyle={bgColor:"rgba(0, 0, 0, .75)",barColor:"rgb(231, 163, 17)",barTextColor:"#f1f1f1",barTextShadowColor:"rgba(0, 0, 0, .5)",optionBgColor:"rgb(255, 255, 255)",optionTextColor:"#333333",optionTextShadowColor:"rgba(0, 0, 0, 0)",outerTextColor:"#f1f1f1",outerTextShadowColor:"rgba(0, 0, 0, .5)"},o.getDefaultStyle=function(t){return"undefined"!=typeof o.defaultStyle[t]?o.defaultStyle[t]:void 0},o.resetStyles=function(){for(var t in o.defaultStyle)o.input[t]=o.defaultStyle[t]},o.question="",o.totalVotes=0,o.options=[];var l={bgColor:o.getDefaultStyle("bgColor"),barColor:o.getDefaultStyle("barColor"),barTextColor:o.getDefaultStyle("barTextColor"),barTextShadowColor:o.getDefaultStyle("barTextShadowColor"),optionBgColor:o.getDefaultStyle("optionBgColor"),optionTextColor:o.getDefaultStyle("optionTextColor"),optionTextShadowColor:o.getDefaultStyle("optionTextShadowColor"),outerTextColor:o.getDefaultStyle("outerTextColor"),outerTextShadowColor:o.getDefaultStyle("outerTextShadowColor"),options:[{text:"",keyword:""},{text:"",keyword:""}],question:"",subMult:1,subOnly:"false"},i=angular.copy(l);if(o.input=angular.copy(i),o.updateStatus=function(t,n){e(function(){o.connected=t,o.status=n})},o.testInterval=null,o.testForm=function(){e(function(){n.cancel(o.testInterval),o.question="Is this teh urn? (Fake Poll)",o.totalVotes=100,o.options=[{text:"Teh urn",keyword:"urn",count:50},{text:"Not teh urn",keyword:"noep",count:50}],o.testInterval=n(function(){var t=Math.floor(9*Math.random());t>0?o.options[1].count+=1:o.options[0].count+=1,o.totalVotes+=1},150)})},o.testForm(),o.percentage=function(t){var e=Number(t/o.totalVotes*100).toFixed(2);return isNaN(e)?0:e},o.closePoll=function(){o.throttleButtons(),void 0!==r&&r.emit("close_poll",o.user)},o.resetForm=function(){o.input.options.splice(2,o.input.options.length-2),o.input=angular.copy(i),o.pollForm.$setPristine()},o.addOption=function(){e(function(){var t=o.input.options.length;8>t&&o.input.options.push({text:"",keyword:""})})},o.removeOption=function(){e(function(){var t=o.input.options.length,e=t-1;t>2&&o.input.options.splice(e,1)})},o.submitForm=function(t){if(o.throttleButtons(),t&&"undefined"!=typeof r){var e={options:o.input.options,question:o.input.question,subOnly:o.input.subOnly,style:{},token:_twitchToken};for(var n in o.defaultStyle)if(o.defaultStyle.hasOwnProperty(n)){var l=o.defaultStyle[n];l!==o.input[n]&&(e.style[n]=o.input[n])}r.emit("create_poll",e)}},o.throttleButtons=function(){o.throttled=!0,e(function(){o.throttled=!1},2e3)},o.incSubMult=function(){var t=Number(o.input.subMult);99>t&&(o.input.subMult=t+1)},o.decSubMult=function(){var t=Number(o.input.subMult);t>1&&(o.input.subMult=t-1)},"undefined"==typeof io)return void o.updateStatus(!1,"Failed to load socket connection library... Application may be down. Please try reloading this page.");var r=io(_appServer);r.on("connect",function(){o.updateStatus(!0,"Connected."),r.emit("client_connect",{user:_twitchUsername,token:_twitchToken})}),r.on("disconnect",function(){o.updateStatus(!1,"Disconnected, attempting to reconnect...")}),r.on("user",function(t){return null===t?void o.updateStatus(!1,"Your session data does not match what Twitch is telling me. You should try logging out and logging in again."):void e(function(){o.user=t})}),r.on("poll",function(t){n.cancel(o.testInterval),e(function(){o.question=t.question,o.totalVotes=t.totalVotes,o.options=t.options})}),r.on("poll_closed",function(){o.testForm()}),r.on("vote",function(t){e(function(){o.options[t].count+=1,o.totalVotes+=1})}),r.on("vote_switch",function(t){e(function(){o.options[t.from].count-=1,o.options[t.to].count+=1})})}angular.module("LivePoll-Client").controller("LivePollClientCtrl",t),t.$inject=["$rootScope","$scope","$timeout","$interval"]}(),function(){angular.module("LivePoll-Display",["ngAnimate","Progress"]).config(["$interpolateProvider",function(t){}])}(),function(){function t(t,o,e,n){if(t.closed=!1,t.options=[],t.pollActive=!1,t.question="",t.style={},t.totalVotes=0,t.percentage=function(o){var e=Number(o/t.totalVotes*100).toFixed(2);return isNaN(e)?0:e},t.addColor=function(){},t.textShadow=function(t){return"undefined"!=typeof t?"1px 1px 0 "+t:{}},(o.innerHeight<500||o.innerWidth<500)&&(t.showWindowEnforcer=!0),"undefined"!=typeof io){var l=io(_appServer);l.on("connect",function(){l.emit("client_connect",{user:_twitchUsername})}),l.on("poll",function(o){n(function(){t.style.bgColor=o.style.bgColor,t.style.barColor=o.style.barColor,t.style.barTextColor=o.style.barTextColor,t.style.barTextShadowColor=o.style.barTextShadowColor,t.style.optionBgColor=o.style.optionBgColor,t.style.optionTextColor=o.style.optionTextColor,t.style.optionTextShadowColor=o.style.optionTextShadowColor,t.style.outerTextColor=o.style.outerTextColor,t.style.outerTextShadowColor=o.style.outerTextShadowColor,t.question=o.question,t.totalVotes=o.totalVotes,t.options=o.options,t.pollActive=!0}),console.log("poll received"),console.log(o)}),l.on("poll_closed",function(){console.log("poll closed"),n(function(){t.pollActive=!1})}),l.on("vote",function(o){n(function(){t.options[o].count+=1,t.totalVotes+=1}),console.log("vote received: %s",o)}),l.on("vote_switch",function(o){n(function(){t.options[o.from].count-=1,t.options[o.to].count+=1}),console.log("vote switch received")})}}angular.module("LivePoll-Display").controller("LivePollDisplayCtrl",t),t.$inject=["$scope","$window","$interval","$timeout"]}(),function(){angular.module("Progress",[])}(),function(){function t(){return{link:function(t,o,e){e.$observe("percent",function(t){o.css("width",t+"%")})}}}angular.module("Progress").directive("ngProgress",t)}(),function(){angular.module("Tooltip",[])}(),function(){function t(t){return{link:function(o,e,n){var l=n.ngTooltip,i=angular.element(t[0].body),r=angular.element('<div class="tooltip"></div>');r.html(l),r.css("display","none"),i.append(r),e.hover(function(){var t=e.offset(),o=t.top,n=t.left,l=e.width(),i=e.height();r.css("left",n+l+"px"),r.css("top",o+i/2-25+"px"),r.stop().fadeIn(200)},function(){r.stop().fadeOut(200)})}}}angular.module("Tooltip").directive("ngTooltip",t),t.$inject=["$document"]}();
angular.module("app.dashnav",[]).directive("dashnav",function(){return{restrict:"E",templateUrl:"/app/directives/dashnavDirective/dashnavView.html",controller:["$scope",function(e){e.goToProfile=function(e){location.href="/profile?username="+e}}]}});
angular.module("app.rank",[]).directive("rank",function(){return{restrict:"A",scope:{rank:"="},controller:["$scope",function(r){}],templateUrl:"/app/directives/rank/rankView.html"}});
angular.module("app.sidebar",[]).directive("sidebar",function(){return{restrict:"E",controller:["$scope","InfoService",function(e,o){e.updateInfo=function(){o.allInfo(function(o){e.info=o.data},function(e){console.log(e)}),o.bitsLeaderboard(function(o){e.bitsLeaderboard=o.data},function(e){console.log(e)}),o.xpLeaderboard(function(o){e.xpLeaderboard=o.data},function(e){console.log(e)})},e.updateInfo()}],templateUrl:"/app/directives/sidebarDirective/sidebarView.html"}});
angular.module("app.about",["ui.router"]).config(["$stateProvider",function(o){o.state("about",{url:"/about",templateUrl:"app/pages/about/aboutView.html",controller:"AboutController"})}]).controller("AboutController",["$scope",function(o){}]);
angular.module("app.auth",["ui.router"]).config(["$stateProvider",function(o){o.state("auth",{url:"/login",templateUrl:"app/pages/auth/loginView.html",controller:"LoginController"})}]).controller("LoginController",function(o,t,l,r){});
angular.module("app.badges",[]).config(["$stateProvider",function(e){e.state("badges",{url:"/badges",templateUrl:"/app/pages/badges/badgesView.html",controller:"BadgesController"})}]).controller("BadgesController",["$scope","$http","BadgeService","AuthService",function(e,n,r,t){e.imageNameFromName=function(e){return e.toLowerCase().replace(/\s+/g,"-")},e.userHasBadge=function(e){if(t.user)for(var n in t.user.badges){var r=t.user.badges[n];if(e.id===r.id)return!0}return!1},e.badgeForName=function(n){for(var r in e.badges){var t=e.badges[r];if(t.name===n)return t}return null},r.getAll(function(n){e.badges=n.data},angular.noop),e.badgePercentCalculators={Authentic:function(){return"PENDING"==t.user.role?0:100},"Making Links":function(){return Math.min(t.user.connectedAccounts.length>0?100:0,100)},"Full Coverage":function(){return Math.min(t.user.connectedAccounts.length/5*100,100)},"Feed The Pig":function(){return Math.min(t.user.ranking.points/5e3*100,100)},"Penny-Pincher":function(){return Math.min(t.user.ranking.points/25e3*100,100)},"Follow Me":function(){return Math.min(t.user.referredUsers/5*100,100)},Influential:function(){return Math.min(t.user.referredUsers/25*100,100)},"Natural Leader":function(){return Math.min(t.user.referredUsers/50*100,100)},"Ace High":function(){return e.userHasBadge(e.badgeForName("Ace High"))?100:0},"Beginner's Luck":function(){return t.user.gamesWon>0?100:0},Victorious:function(){return Math.min(t.user.gamesWon/5*100,100)},Hotshot:function(){return Math.min(t.user.gamesWon/10*100,100)},Steamroller:function(){return Math.min(t.user.gamesWon/25*100,100)},"Hot Streak":function(){return Math.min(t.user.gameStreak/3*100,100)},"Cake Day":function(){return e.userHasBadge(e.badgeForName("Cake Day"))?100:0}}}]);
angular.module("app.blog",[]).config(["$stateProvider",function(o){o.state("blog",{url:"/blog",templateUrl:"/app/pages/blog/blogView.html",controller:"BlogController"})}]).controller("BlogController",["$scope","BlogService","$mdDialog","ToastService","AuthService","$anchorScroll",function(o,t,l,e,s,a){o.posts=[],o.AuthService=s,o.updatePosts=function(){t.allPosts(function(t){console.log(t.data),o.posts=t.data},function(o){console.log(o)})},o.newPost=function(t){l.show({templateUrl:"/app/components/dialogs/addBlogPostDialog/addBlogPostDialogView.html",controller:"AddBlogPostDialogController",targetEvent:t}).then(function(t){e.showDevwarsToast("fa-check-circle","Successfully published",t.title),o.updatePosts()},function(o){o&&e.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not publish post")})},o.editPost=function(t,s){l.show({templateUrl:"/app/components/dialogs/addBlogPostDialog/addBlogPostDialogView.html",controller:"EditBlogPostDialogController",targetEvent:s,locals:{post:t}}).then(function(t){e.showDevwarsToast("fa-check-circle","Success","Edited post"),o.updatePosts()},angular.noop)},o.deletePost=function(l){t.deleteBlog(l.id,function(t){e.showDevwarsToast("fa-check-circle","Successfully deleted post",t.data.title),o.updatePosts()},function(){e.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not delete post")})},o.updatePosts()}]);
var home=angular.module("app.coming",["ui.router"]);home.config(["$stateProvider",function(o){o.state("coming",{url:"/coming",templateUrl:"/app/pages/coming/comingView.html"})}]);
angular.module("app.dashboard",[]).config(["$stateProvider",function(a){a.state("dashboard",{name:"dashboard",url:"/dashboard","abstract":!0,templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"}).state("dashboard.home",{url:"",parent:"dashboard",views:{"":{templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"},"dashboardInner@dashboard":{templateUrl:"/app/pages/dashboard/dashboardHome.html",controller:"DashboardController"}}}).state("dashboard.profile",{url:"/profile",parent:"dashboard",views:{"":{templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"},"dashboardInner@dashboard":{templateUrl:"/app/pages/settings/settingsProfileView.html",controller:"SettingsController"}}}).state("dashboard.badges",{url:"/badges",parent:"dashboard",views:{"":{templateUrl:"/app/pages/dashboard/dashboardView.html",controller:"DashboardController"},"dashboardInner@dashboard":{templateUrl:"/app/pages/badges/badgesView.html",controller:"BadgesController"}}})}]).controller("DashboardController",["$scope","AuthService","UserService",function(a,r,o){a.AuthService=r,a.onLoad=function(){o.getActivities(function(a){r.user.activityLog=a.data},angular.noop)},r.user?a.onLoad():r.callbacks.push(a.onLoad),a.imageForRank=function(a){var r={"Bronze I":"bronze1","Bronze II":"bronze2","Bronze III":"bronze3","Bronze IV":"bronze4","Bronze V":"bronze5","Silver I":"silver1","Silver II":"silver2","Silver III":"silver3","Silver IV":"silver4","Silver V":"silver5","Gold I":"gold1","Gold II":"gold2","Gold III":"gold3","Gold IV":"gold4","Gold V":"gold5","Platinum I":"platinum1","Platinum II":"platinum2","Platinum III":"platinum3","Platinum IV":"platinum4","Platinum V":"platinum5","Diamond I":"diamond1","Diamond II":"diamond2","Diamond III":"diamond3","Diamond IV":"diamond4","Diamond V":"diamond5",Elite:"elite"};return r[a]}}]);
angular.module("app.contact",[]).config(["$stateProvider",function(e){e.state("contact",{url:"/contact",templateUrl:"/app/pages/contact/contactView.html",controller:"ContactController"})}]).controller("ContactController",["$scope","ToastService","ContactService","AuthService",function(e,t,r,o){e.form={},e.AuthService=o,e.setDefaults=function(){o.user?(e.form.name=o.user.username,e.form.email=o.user.email):o.callbacks.push(e.setDefaults)},e.submit=function(o){o.name&&o.email&&o.type&&o.text?o.text.length>1e3?t.showDevwarsErrorToast("fa-exclamation-circle","Error","Enquiry too long"):r.create(o.name,o.text,o.type,o.email,function(r){t.showDevwarsToast("fa-check-circle","Success","We have received your feedback"),delete e.form},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Something went wrong")}):t.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing fields")},e.setDefaults()}]);
angular.module("app.gameControlPanel",[]).config(["$stateProvider",function(e){e.state("gameControlPanel",{url:"/gpanel",templateUrl:"/app/pages/gameControlPanel/gameControlPanelView.html",controller:"GameControlPanelController"})}]).controller("GameControlPanelController",["$scope","GameService","$location","AuthService","$rootScope","$mdDialog","ToastService","$interval","DialogService",function(e,a,t,o,i,n,c,s,l){var r=t.search();e.game=null,e.pickedDate=new Date,e.pickedTime=new Date,e.updateGame=function(){r.game?a.getGame(r.game,function(a){e.game=a.data,e.pickedDate=new Date(e.game.timestamp),e.pickedTime=new Date(e.game.timestamp),e.updateSignedUpUsers()},function(e){console.log(e)}):a.currentGame(function(a){e.game=a.data,e.pickedDate=new Date(e.game.timestamp),e.pickedTime=new Date(e.game.timestamp),e.updateSignedUpUsers()},function(t){console.log(t),a.nearestGame(function(a){e.game=a.data,e.pickedDate=new Date(e.game.timestamp),e.pickedTime=new Date(e.game.timestamp),e.updateSignedUpUsers()},function(e){console.log(e)})})},e.updateSignedUpUsers=function(){a.pendingPlayers(e.game.id,function(a){console.log(a.data),e.signedUpUsers=a.data},function(e){})},e.saveGame=function(){e.getGameTimestamp();for(var t in e.game.teams){var o=e.game.teams[t];for(var i in o.completedObjectives){var n=o.completedObjectives[i].objective,s=!1;for(var l in e.game.objectives){var r=e.game.objectives[l];r.id&&n.id&&r.id===n.id&&(s=!0)}s||o.completedObjectives.splice(i,1)}}a.editGame(e.game.id,JSON.stringify(e.game),function(a){c.showDevwarsToast("fa-check-circle","Success","Saved Game"),e.updateGame()},function(e){c.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not save game.")})},e.addPlayer=function(a,t){n.show({templateUrl:"/app/components/dialogs/addPlayerDialog/addPlayerDialogView.html",controller:"AddPlayerDialogController",targetEvent:t,locals:{game:a}}).then(function(a){c.showDevwarsToast("fa-check-circle","Successfully added player",a.newPlayer.user.username),e.updateGame()},function(e){c.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player.")})},e.removePlayer=function(t,o,i){a.removePlayer(t.id,o.id,function(a){c.showDevwarsToast("fa-check-circle","Successfully removed player",o.user.username),e.updateGame()},function(e){console.log(e)}),i.stopPropagation()},e.editPlayer=function(a,t,o,i){n.show({templateUrl:"/app/components/dialogs/editPlayerDialog/editPlayerDialogView.html",controller:"EditPlayerDialogController",targetEvent:i,locals:{game:a,player:t,team:o}}).then(function(a){e.updateGame(),c.showDevwarsToast("fa-check-circle","Successfully edited player",a.oldPlayer.user.username)},function(e){})},e.getGameTimestamp=function(){return e.pickedDate&&(e.pickedDate.setHours(0),e.pickedDate.setMinutes(0),e.pickedDate.setSeconds(0),e.pickedDate.setMilliseconds(0),e.game.timestamp=e.pickedDate.getTime(),e.pickedTime&&(e.game.timestamp+=60*(60*e.pickedTime.getHours()+e.pickedTime.getMinutes())*1e3)),e.game.timestamp},e.activateGame=function(){a.activateGame(e.game.id,function(a){e.game=a.data},angular.noop)},e.deactivateGame=function(){a.deactivateGame(e.game.id,function(a){e.game=a.data},angular.noop)},e.addPointsToTeamInGame=function(e,t,o){l.getInputWithMessage("Add points to "+e.name,"Points",o,function(o){a.addPointsToTeam(e.id,t.id,0,o,function(a){c.showDevwarsToast("fa-check-circle","Success","Added "+o+" points to "+e.name)},angular.noop)})},e.addXPToTeamInGame=function(e,t,o){l.getInputWithMessage("Add XP to "+e.name,"XP",o,function(o){a.addPointsToTeam(e.id,t.id,o,0,function(a){c.showDevwarsToast("fa-check-circle","Success","Added "+o+" XP to "+e.name)},angular.noop)})},e.toggleTeamObjective=function(a,t){if(a.completedObjectives||(console.log("Resetting"),a.completedObjectives=[]),e.teamHasObjective(a,t)){for(var o=-1,i=0;i<a.completedObjectives.length;i++)t.id===a.completedObjectives[i].objective.id&&(o=i,i=a.completedObjectives.length);o>-1&&(a.completedObjectives.splice(o,1),console.log("Able to remove"))}else a.completedObjectives.push({team_id:a.id,objective:t}),console.log("Able to add")},e.teamHasObjective=function(e,a){for(var t in e.completedObjectives){var o=e.completedObjectives[t].objective;if(o.id===a.id)return!0}return!1},e.removeObjectiveFromGame=function(e,a){a.objectives&&a.objectives.splice(a.objectives.indexOf(e),1);for(var t in a.teams){var o=a.teams[t];for(var i in o.completedObjectives){var n=o.completedObjectives[i].objective;n.id===e.id&&o.completedObjectives.splice(o.completedObjectives.indexOf(n,1))}}},e.endGame=function(e){a.endGame(e.id,e.teams.red.win?e.teams.red.id:e.teams.blue.id,function(e){c.showDevwarsToast("fa-check-circle","Success","Ended Game")},function(e){c.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not end game")})},i.$on("$locationChangeStart",function(e,a,t){var o=a.split("?")[1],i=t.split("?")[1],n=a.split("?")[0],c=t.split("?")[0];n===c&&o&&!i&&location.reload(),n===c&&i&&!o&&location.reload(),n===c&&o&&i&&o!==i&&location.reload()}),e.updateGame()}]);
angular.module("app.games",[]).config(["$stateProvider",function(e){e.state("games",{url:"/games",templateUrl:"/app/pages/games/gamesView.html",controller:"GameController"})}]).controller("GameController",["$scope","GameService","AuthService","$mdDialog","$mdToast","$filter","ToastService","DialogService",function(e,a,t,s,o,n,l,r){e.games=[],e.AuthService=t,e.options={thickness:200,legend:!1},e.labels=["blue","red"],e.DialogService=r,a.pastGames(function(a){e.pastGames=a.data;for(var t in e.pastGames){var s=e.pastGames[t];for(var o in s.teams){var n=s.teams[o],l=n.players,r=[];for(var i in l){var m=l[i];"html"===m.language.toLowerCase()&&(r[0]=m),"css"===m.language.toLowerCase()&&(r[1]=m),"js"===m.language.toLowerCase()&&(r[2]=m)}console.log(r),n.players=r}}$(document).width()>840&&e.setSelectedGame(e.pastGames[0])},angular.noop),a.upcomingGames(function(a){e.upcomingGames=a.data},angular.noop),e.signupForGame=function(e,a){t.user&&"PENDING"!==t.user.role?r.applyForGame(e,a):t.user?l.showDevwarsErrorToast("fa-envelope-o","Error","Please confirm your email before applying for games."):r.signup(a)},e.setSelectedGame=function(a,t){e.selectedGame=a,t>-1&&(new Date).getTime()-e.lastTimeClicked>200&&($(".game"+t).next().hasClass("slide")?($(".game"+t).next().slideToggle(),$(".game"+t).next().removeClass("slide")):($(".slide").slideToggle(),$(".slide").removeClass("slide"),$(".game"+t).next().slideToggle(),$(".game"+t).next().addClass("slide")),e.lastTimeClicked=(new Date).getTime()),e.designData=e.dataForGameCategory(e.selectedGame,"design"),e.funcData=e.dataForGameCategory(e.selectedGame,"func"),e.codeData=e.dataForGameCategory(e.selectedGame,"code")},e.isGameSelected=function(a){return a.id===e.selectedGame.id},e.moderateGame=function(e){window.location="/#/gpanel?game="+e.id},e.dataForGameCategory=function(e,a){var t=[];for(var s in e.teams){var o=e.teams[s];o[a+"Votes"]&&t.push({label:o.name,value:o[a+"Votes"],color:"blue"===o.name?"#03A9F4":"#E91E63"})}return t},e.getVotePointsEarned=function(e,a){var t=null,s=null;"red"===e?(s=a.teams.red,t=a.teams.blue):"blue"===e&&(s=a.teams.blue,t=a.teams.red);var o=0;return s.designVotes>=t.designVotes&&0!==s.designVotes&&0!==t.designVotes&&(o+=2),s.funcVotes>=t.funcVotes&&0!==s.funcVotes&&0!==t.funcVotes&&(o+=2),s.codeVotes>=t.codeVotes&&0!==s.codeVotes&&0!==t.codeVotes&&(o+=2),s.completedObjectives.length===a.objectives.length&&o++,o},e.getOtherTeam=function(e,a){return a.teams["red"===e.name?"blue":"red"]},e.getAllGames=function(t){a.allGames(0,5,function(a){var s=a.data;e.games=e.games.concat(s);for(var o=0;o<e.games.length;o++){var n=e.games[o];t&&n.id===t.data.id&&(e.games.splice(o,1),o=e.games.length)}console.log(e.games)},function(e){console.log(e)})},e.teamHasObjective=function(e,a){for(var t in e.completedObjectives){var s=e.completedObjectives[t].objective;if(s.id===a.id)return!0}return!1},e.sortPlayers=function(e){var a=["html","css","js"];e.sort(function(e){return a.indexOf(e.language.toLowerCase())})},a.nearestGame(function(a){e.games.push(a.data),e.getAllGames(a)},function(a){console.log(a),e.getAllGames()}),e.lastTimeClicked=(new Date).getTime()}]);
var home=angular.module("app.home",["ui.router"]);home.config(["$stateProvider",function(o){o.state("home",{url:"/",templateUrl:"/app/pages/home/homeView.html",controller:"HomeController"})}]),home.controller("HomeController",["$scope","InfoService","DialogService","BlogService","$location","$anchorScroll","AuthService",function(o,e,n,t,l,a,r){o.DialogService=n,o.AuthService=r,o.updateInfo=function(){e.allInfo(function(e){o.info=e.data},function(o){console.log(o)}),e.bitsLeaderboard(function(e){o.bitsLeaderboard=e.data},function(o){console.log(o)}),e.xpLeaderboard(function(e){o.xpLeaderboard=e.data},function(o){console.log(o)}),t.allPosts(function(e){e.data.splice(2,e.data.length-2),o.posts=e.data,console.log(o.posts)},function(o){console.log(o)})},o.scrollToBlogPost=function(o){location.href="/blog#"+o},o.updateInfo()}]);
angular.module("app.help",[]).config(["$stateProvider",function(l){l.state("help",{url:"/help",templateUrl:"/app/pages/help/helpView.html",controller:"HelpController"})}]).controller("HelpController",["$scope",function(l){}]),app.controller("HelpController",function(l,e,o){l.scrollTo=function(l){e.hash(l),o()}});
angular.module("app.leaderboards",["ui.router"]).config(["$stateProvider",function(e){e.state("leaderboards",{url:"/leaderboards",templateUrl:"app/pages/leaderboards/leaderboardsView.html",controller:"LeaderboardsController"})}]).controller("LeaderboardsController",["$scope","InfoService",function(e,r){e.page=0,e.users=[],e.loadMore=function(){r.leaderboard(e.page,function(r){for(var a in r.data){var o=r.data[a][0];o.score=r.data[a][1],e.users.push(o)}e.page++},function(e){console.log(e)})},e.loadMore()}]);
angular.module("app.liveGame",[]).config(["$stateProvider",function(e){e.state("livegame",{url:"/live",templateUrl:"/app/pages/livegame/livegameView.html",controller:"LiveGameController"})}]).controller("LiveGameController",["$scope","GameService",function(e,l){e.live=!1,l.currentGame(function(l){e.live=!0},function(l){e.live=!1})}]);
angular.module("app.modCP",["ui.router"]).config(["$stateProvider",function(e){e.state("modCP",{url:"/modCP","abstract":!0,name:"modCP",templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"}).state("modCP.createGameView",{url:"/creategame",parent:"modCP",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPcreateGameView.html",controller:"ModCPController"}}}).state("modCP.createTeamsView",{url:"/createteams",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPcreateTeamsView.html",controller:"ModCPController"}}}).state("modCP.createObjectiveView",{url:"/createobjectives",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPcreateObjectivesView.html",controller:"ModCPController"}}}).state("modCP.liveGameView",{url:"/livegame",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPliveGameView.html",controller:"ModCPController"}}}).state("modCP.PostGameView",{url:"/postgame",parent:"modCP",views:{"":{templateUrl:"app/pages/modCP/modCPView.html",controller:"ModCPController"},"modCPInner@modCP":{templateUrl:"app/pages/modCP/modCPPostGameView.html",controller:"ModCPController"}}})}]).controller("ModCPController",["$scope","GameService","ToastService","$filter","$mdDialog","$location",function(e,a,t,o,r,c){e.pickedDate=new Date,e.pickedTime=new Date,e.availableGames=null,e.dateWatch=function(){e.gameDate=new Date(e.pickedDate.getTime()),e.gameDate.setHours(e.pickedTime.getHours()),e.gameDate.setMinutes(e.pickedTime.getMinutes()),e.gameDate.setSeconds(0),e.gameDate.setMilliseconds(0)},e.updateGames=function(){a.allGames(0,10,function(a){if(e.availableGames=a.data,console.log(c.search()),c.search().game){var t=parseInt(c.search().game);e.availableGames.forEach(function(a){a.id===t&&(e.selectedGame=a)})}},angular.noop)},e.gameLabel=function(e){return o("date")(e.timestamp,"mediumDate")+" - "+e.name},e.createGame=function(){e.dateWatch(),a.createGame(e.name,e.gameDate.getTime(),function(e){t.showDevwarsToast("fa-check-circle","Success","Created Game")},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not create game")})},e.addPlayer=function(o){r.show({templateUrl:"/app/components/dialogs/addSelectedPlayerDialog/addSelectedPlayerDialogView.html",controller:"AddSelectedPlayerDialogController",locals:{player:o,game:e.selectedGame}}).then(function(r){a.addPlayer(r.team.id,e.selectedGame.id,r.language,JSON.stringify(o),function(a){e.updateSelectedGame()},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player")})},angular.noop)},e.updateSelectedGame=function(){a.getGame(e.selectedGame.id,function(a){e.selectedGame=a.data},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not refresh game")})},e.removePlayer=function(o){a.removePlayer(e.selectedGame.id,o.id,function(a){e.updateSelectedGame(),t.showDevwarsToast("fa-check-circle","Success","Removed "+o.user.username)},function(e){t.showDevwarsErrorToast("fa-exclamtion-circle","Error","Could not remove player")})},e.forfeitPlayer=function(o){a.forfeitUser(JSON.stringify(o),function(a){e.updateSelectedGame(),t.showDevwarsToast("fa-check-circle","Success","Forfeited Player")},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not forfeit player")})},e.toggleObjective=function(a,t){var o=e.teamHasObjective(t,a);console.log("Has Objective : "+o),o?t.completedObjectives=t.completedObjectives.filter(function(e){return e.objective.id!==a.id}):t.completedObjectives.push({objective:a,team_id:t.id}),console.log(t.completedObjectives)},e.teamHasObjective=function(e,a){var t=!1;return e.completedObjectives.forEach(function(e){e.objective.id==a.id&&(t=!0)}),t},e.activateGame=function(o){a.activateGame(o.id,function(a){t.showDevwarsToast("fa-check-circle","Success","Activated Game"),e.updateSelectedGame()},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not activate game")})},e.deactivateGame=function(o){a.deactivateGame(o.id,function(a){t.showDevwarsToast("fa-check-circle","Success","Deactivated Game"),e.updateSelectedGame()},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not deactivate game")})},e.saveGame=function(o){o.objectives&&(o.objectives=o.objectives.filter(function(e){return e.objectiveText.length>0}));for(var r in o.teams){var c=o.teams[r];c.completedObjectives&&(c.completedObjectives=c.completedObjectives.filter(function(e){var a=!1;return o.objectives&&o.objectives.forEach(function(t){t.id==e.objective.id&&(a=!0)}),a}))}o.objectives.forEach(function(e,a){e.orderID=a}),a.editGame(o.id,JSON.stringify(o),function(a){t.showDevwarsToast("fa-check-circle","Success","Saved game"),e.selectedGame=a.data},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not save game")})},e.endGame=function(o,r){a.endGame(o.id,r.id,function(a){e.updateSelectedGame(),t.showDevwarsToast("fa-check-circle","Success",r.name+" won : Game Over")},function(e){t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not end game")})},e.$watch("selectedGame",function(t,o){a.pendingPlayers(e.selectedGame.id,function(a){e.selectedGame.appliedUsers=a.data},angular.noop)}),e.updateGames()}]);
angular.module("app.profile",[]).config(["$stateProvider",function(e){e.state("profile",{url:"/profile",templateUrl:"/app/pages/profile/profileView.html",controller:"ProfileController"})}]).controller("ProfileController",["$scope","AuthService","UserService","$location",function(e,r,o,l){e.AuthService=r;var t=l.search();t.username&&o.getPublicUser(t.username,function(r){e.user=r.data},function(e){console.log(e)})}]);
angular.module("app.shop",[]).config(["$stateProvider",function(o){o.state("shop",{url:"/shop",templateUrl:"/app/pages/shop/shopView.html",controller:"ShopController"})}]).controller("ShopController",["$scope",function(o){}]);
angular.module("app.verify",[]).config(["$stateProvider",function(e){e.state("verify",{url:"/verify",templateUrl:"/app/pages/verify/verifyView.html",controller:"VerifyController"})}]).controller("VerifyController",["$scope",function(e){}]),app.controller("VerifyController",["$scope","$location","$anchorScroll","$interval",function(e,r,o,n){var l=r.search();e.username=l.username,e.seconds=10,n(function(){e.seconds--,0===e.seconds&&(location.href="/#/dashboard")},1e3,10,!0),e.scrollTo=function(e){r.hash(e),o()}}]);
angular.module("app.settings",["ui.router"]).config(["$stateProvider",function(e){e.state("settings",{url:"/settings","abstract":!0,name:"settings",templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"}).state("settings.accountView",{url:"",parent:"settings",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsAccountView.html",controller:"SettingsController"}}}).state("settings.profileView",{url:"/profile",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsProfileView.html",controller:"SettingsController"}}}).state("settings.notificationsView",{url:"/notifications",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsNotificationsView.html",controller:"SettingsController"}}}).state("settings.connectView",{url:"/connections",views:{"":{templateUrl:"app/pages/settings/settingsView.html",controller:"SettingsController"},"settingsInner@settings":{templateUrl:"app/pages/settings/settingsConnectView.html",controller:"SettingsController"}}})}]).controller("SettingsController",["$scope","AuthService","$http","$mdDialog","ToastService","UserService","$location","DialogService",function(e,t,n,o,s,r,a,i){e.AuthService=t;var l=a.search();e.initProfile=function(){t.user?(e.profile=t.user,console.log(e.profile)):(e.profile={},t.callbacks.push(e.initProfile))},e.checkVeteran=function(){if(t.user){if(l.veteran){var n=null;for(var o in t.user.connectedAccounts)"TWITCH"===t.user.connectedAccounts[o].provider&&(n=t.user.connectedAccounts[o].username);i.showConfirmDialog("Account Transfer","We have record that you have played in Season 1 with your Twitch account "+n+". We have that username reserved for you. Would you like to claim it or keep your existing username? If you keep your username, we will release the username "+n+" to the public.","Claim "+n,"Keep my username",null).then(function(e){r.claimTwitch(function(e){location.href="/settings/connections"},function(e){s.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},function(e){r.releaseUsername(function(e){location.href="/settings/connections"},function(e){s.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})})}}else t.callbacks.push(e.checkVeteran)},e.disconnect=function(e){t.hasProvider(e)?n({method:"GET",url:"/v1/connect/"+e+"/disconnect"}).then(function(e){console.log(e),location.reload()},function(e){console.log(e)}):location.href="/v1/connect/"+e},e.editAvatarImage=function(e,t){o.show({templateUrl:"/app/components/dialogs/editAvatarImageDialog/editAvatarImageView.html",controller:"EditAvatarImageDialogController",clickOutsideToClose:!1,locals:{image:e}}).then(function(e){location.reload()},function(e){})},e.passwordsMatch=function(e){return e.newPassword1===e.newPassword2},e.changePassword=function(e){e.newPassword1&&e.newPassword2&&e.newPassword1===e.newPassword2&&r.changePassword(e.newPassword1,e.currentPassword,function(e){s.showDevwarsToast("fa-check-circle","Success","Changed your password")},function(e){s.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},e.changeEmail=function(e){e.newEmail&&e.currentPassword&&r.changeEmail(e.newEmail,e.currentPassword,function(e){s.showDevwarsToast("fa-check-circle","Success","Changed Email"),t.init()},function(e){s.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},e.updateInfo=function(e){r.updateInfo(e.company,e.location,e.url,e.username,function(e){location.reload()},function(e){s.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})},e.$watch("selectedAvatarImage",function(t,n){t!==n&&e.editAvatarImage(e.selectedAvatarImage)}),e.initProfile()}]);
angular.module("app.warriorReg",[]).config(["$stateProvider",function(e){e.state("warriorReg",{url:"/warrior-signup",templateUrl:"/app/pages/warriorReg/warriorRegView.html",controller:"warriorRegController"})}]).controller("warriorRegController",["$scope","AuthService","WarriorService","ToastService","$http",function(e,o,r,a,t){e.AuthService=o,e.warrior={},e.warrior.htmlRate=1,e.warrior.cssRate=1,e.warrior.jsRate=1,e.initWarrior=function(){o.user?(console.log(o.user),o.user.warrior&&(location.href="/")):o.callbacks.push(e.initWarrior)},e.skillNames=["Novice","Beginner","Intermediate","Advanced","Expert"],e.htmlTooltips=["You have a basic understanding of HTML, and can use essential tags.","You have a working knowledge of HTML. You understand the basic syntax and methodology of ordering and adding elements to the DOM (Document Object Model).","You have a strong understanding of HTML, and ability to structure a webpage. You have a knowledge of a variety of attributes, and know how to use them correctly. You have a strong understanding of semantics and structural meaning (parameter usage) .","You have worked on larger scale projects, and collaborated with other people. You have strong experience working on various development projects. You have worked with SEO tools.","You use HTML at a production level. You can create websites from scratch with no use of frameworks, and have worked as a front-end developer. You have used Shadow DOM in the past."],e.cssTooltips=["You have basic knowledge of CSS. You understand the basic syntax and methodology of cascading stylesheets","You have a working knowledge of CSS. You have style elements, and know about different frameworks. You have used Bootstrap. You have heard of pre-processors. ","You have extensive CSS knowledge. You have experience working with responsive design, and understand the mobile-first ideology. You understand the issues that can occur with different browsers. You have used a CMS in the past, and can style elements on them ","You have worked on larger scale projects, and collaborated with other people. You have strong experience working on various development projects. You understand BEM practices, and implement them ","You use CSS at a production level. You can style websites from scratch with no use of frameworks, and have worked as a front-end developer"],e.jsTooltips=["You have a basic knowledge of JavaScript.","You have working knowledge of JavaScript. You understand the basic syntax and methodology of OOP","You have used Javascript with a popular library or framework, and used it for DOM manipulation.","You have worked on larger scale projects, and collaborated with other people. You have strong experience working on various development projects. You have knowledge of MVC and it's use in creating web application.","You use JavaScript at a production level. You make full use of MVC and MV Frameworks, have and incredible understaning of OOP, and have worked as a professional front-end developer"],e.htmlTooltip=e.htmlTooltips[0],e.cssTooltip=e.cssTooltips[0],e.jsTooltip=e.jsTooltips[0],e.getRange=function(e,o){for(var r=[],a=e;o>=a;a++)r.push(a);return r},e.setHtml=function(o){e.htmlTooltip=e.htmlTooltips[o-1],e.warrior.htmlRate=o},e.setCSS=function(o){e.cssTooltip=e.cssTooltips[o-1],e.warrior.cssRate=o},e.setJS=function(o){e.jsTooltip=e.jsTooltips[o-1],e.warrior.jsRate=o},e.register=function(o){e.hasTS?t({url:"/v1/warrior/register",method:"GET",params:o}).then(function(e){a.showDevwarsToast("fa-check-circle","Success","Registered to be a warrior"),setTimeout(function(){location.href="/"},2e3)},function(e){400===e.status?a.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing Parameters"):a.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)}):a.showDevwarsErrorToast("fa-exclamation-circle","Error","You must have Teamspeak to be a warrior")},e.initWarrior()}]);
angular.module("app.addBlogPostDialog",[]).controller("AddBlogPostDialogController",["$scope","BlogService","$mdDialog","ToastService",function(o,e,t,i){o.done=function(){o.title&&o.description&&o.text&&o.image_url?e.createBlog(o.image_url,o.description,o.text,o.title,t.hide,t.cancel):o.title||o.description?o.title?o.description||i.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing post field"):i.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing title field"):i.showDevwarsErrorToast("fa-exclamation-circle","Error","Missing input fields")},o.cancel=function(){t.cancel()}}]).controller("EditBlogPostDialogController",["$scope","post","$mdDialog","BlogService","ToastService",function(o,e,t,i,r){o.title=e.title,o.image_url=e.image_url,o.description=e.description,o.text=e.text,o.done=function(){i.updateBlog(e.id,o.image_url,o.description,o.text,o.title,function(o){console.log(o),t.hide()},function(o){console.log(o),r.showDevwarsErrorToast("fa-exclamation-circle","Error","Couldn't update post")})},o.cancel=function(){t.cancel()}}]);
angular.module("app.addPlayerDialog",[]).controller("AddPlayerDialogController",["$scope","game","$mdDialog","GameService","ToastService",function(e,a,r,n,t){e.game=a,e.$mdDialog=r,e.pendingPlayers=[],n.pendingPlayers(a.id,function(a){console.log(a.data),e.game.pendingPlayers=a.data},function(e){console.log(e)}),e.teamSearchQuery=function(){var r=[];for(var n in a.teams)r.push(a.teams[n]);return r.filter(function(a){return console.log(e.selectedTeam),a.name.toLowerCase().indexOf(e.teamSearchText.toLowerCase())>-1||e.teamSearchText.toLowerCase().indexOf(a.name.toLowerCase())>-1})},e.pendingPlayersQuery=function(){return e.game.pendingPlayers?e.game.pendingPlayers.filter(function(a){return a.username.toLowerCase().indexOf(e.searchText.toLowerCase())>-1||e.searchText.toLowerCase().indexOf(a.username.toLowerCase())>-1}):void 0},e.selectedUserChange=function(){e.searchText=e.selectedUser.username},e.selectedTeamChange=function(){e.teamSearchText=e.selectedTeam.name},e.done=function(){if(e.conflicts=[],!e.selectedUser&&e.searchText)for(var a=0;a<e.game.pendingPlayers.length;a++){var o=e.game.pendingPlayers[a];o.username.toUpperCase()===e.searchText.toUpperCase()&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:o.id}})}else e.selectedUser&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:e.selectedUser.id}});e.selectedPlayer?n.addPlayer(e.selectedTeam.id,e.game.id,e.selectedPlayer,function(e){r.hide({newPlayer:e.data})},function(e){409===e.status?t.showDevwarsErrorToast("fa-exclamation-circle","Error","Player is already in game."):t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player.")}):t.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not add player.")},e.cancel=function(){}}]);
angular.module("app.addSelectedPlayerDialog",[]).controller("AddSelectedPlayerDialogController",["$scope","player","game","$mdDialog",function(e,l,a,o){e.$mdDialog=o,e.game=a}]);
angular.module("app.gameSignupConfirm",[]).controller("GameSignupConfirmDialogController",["$scope","$mdDialog","game",function(n,o,i){n.game=i,n.$mdDialog=o,n.confirmSignUp=function(){o.hide({game:i})},n.cancelSignUp=function(){o.cancel()}}]);
angular.module("app.editAvatarImage",[]).controller("EditAvatarImageDialogController",["$scope","image","$http","$mdDialog","ToastService",function(e,t,a,i,n){e.image=t,e.myCroppedImage="",e.testImage=new Image,e.testImage.src=t,e.$mdDialog=i,e.minSize=Math.min(e.testImage.width,e.testImage.height),setTimeout(function(){e.minSize=50},500),e.uploadImage=function(e){var t=new FormData;t.append("file",r(e)),a.post("/v1/user/changeavatar",t,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){i.hide()},function(e){n.showDevwarsErrorToast("fa-exclamation-circle","Error",e.data)})};var r=function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],i=[],n=0;n<t.length;n++)i.push(t.charCodeAt(n));return new Blob([new Uint8Array(i)],{type:a})}}]);
angular.module("app.confirmDialog",[]).controller("ConfirmDialogController",["$scope","$mdDialog","title","message","yes","no",function(o,e,l,a,i,n){o.$mdDialog=e,o.title=l,o.message=a,o.yes=i,o.no=n}]);
angular.module("app.editPlayerDialog",[]).controller("EditPlayerDialogController",["$scope","game","player","team","$mdDialog","GameService","ToastService",function(e,a,r,n,t,s,l){e.game=a,e.player=r,e.selectedUser=r.user,e.selectedLanguage=r.language,e.selectedTeam=n,e.searchText=r.user.username,e.teamSearchText=n.name,e.pendingPlayers=[],e.$mdDialog=t,s.pendingPlayers(a.id,function(a){console.log(a.data),e.game.pendingPlayers=a.data},function(e){console.log(e)}),e.teamSearchQuery=function(){var r=[];for(var n in a.teams)r.push(a.teams[n]);return r.filter(function(a){return console.log(e.selectedTeam),a.name.toLowerCase().indexOf(e.teamSearchText.toLowerCase())>-1||e.teamSearchText.toLowerCase().indexOf(a.name.toLowerCase())>-1})},e.pendingPlayersQuery=function(){return e.game.pendingPlayers?e.game.pendingPlayers.filter(function(a){return a.username.toLowerCase().indexOf(e.searchText.toLowerCase())>-1||e.searchText.toLowerCase().indexOf(a.username.toLowerCase())>-1}):void 0},e.selectedUserChange=function(){e.searchText=e.selectedUser.username},e.selectedTeamChange=function(){console.log("Team Change"),e.teamSearchText=e.selectedTeam.name},e.done=function(){if(e.conflicts=[],e.selectedUser===r.user&&e.searchText)for(var a=0;a<e.game.pendingPlayers.length;a++){var n=e.game.pendingPlayers[a];n.username.toUpperCase()===e.searchText.toUpperCase()&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:n.id}})}else e.selectedUser!==r.user&&(e.selectedPlayer={team_id:e.selectedTeam.id,language:e.selectedLanguage,user:{id:e.selectedUser.id}});e.selectedPlayer&&e.selectedPlayer.user!==r.user?s.editPlayer(e.selectedTeam.id,e.game.id,r.id,e.selectedPlayer,function(e){t.hide({oldPlayer:r,newPlayer:e.data})},angular.noop):l.showDevwarsErrorToast("fa-exclamation-circle","Error","Could not edit player.")},e.cancel=function(){t.cancel()}}]);
angular.module("app.InputDialog",[]).controller("InputDialogController",["$scope","$mdDialog","title","message",function(l,o,e,a){l.$mdDialog=o,l.title=e,l.message=a}]);
angular.module("app").controller("LoginDialogController",["$scope","AuthService","$mdDialog",function(o,n,l){o.$mdDialog=l,o.login=function(l){o.incorrectCredentials=!1,n.login(l,function(o){console.log(o)},function(n){401===n.status&&(o.incorrectCredentials=!0),console.log(n)})},o.oauthLogin=function(o){console.log(o),window.location="/v1/oauth/"+o}}]);
angular.module("app.signup",[]).controller("SignupDialogController",["$scope","AuthService","vcRecaptchaService","ToastService","$location","$mdDialog",function(s,e,a,c,n,o){s.conflicts=[],s.credentials={},s.$mdDialog=o,s.setWidgetId=function(e){s.widgetId=e},s.setResponse=function(e){console.log(e),s.credentials.captchaResponse=e},s.signup=function(a){s.conflicts=[],s.successMessages=[];var r=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(a.email),t=/^([A-Za-z0-9\-_]+)$/.test(a.username),i=a.password&&a.password2&&a.password===a.password2;t||s.conflicts.push("Username can contain characters, numbers and underscores"),r||s.conflicts.push("Invalid Email Address"),i||s.conflicts.push("Passwords do not match");var l=n.search();l.referral&&(a.referral=l.referral),r&&i&&t&&e.signup(a,function(s){c.showDevwarsToast("fa-check-circle","Sign Up Success","We've sent you an email, it should arrive shortly",5e3),o.cancel()},function(e){console.log(e),409===e.status&&(s.conflicts=e.data)})}}]);
angular.module("app.devwarsToast",[]).controller("DevWarsToastController",["$scope","$mdDialog","faIcon","title","message",function(a,e,o,l,s){a.faIcon=o,a.title=l,a.message=s}]);